<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Записи на парение</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <!-- Loading -->
    <div id="loading" class="loading-screen">
      <div class="loading-spinner"></div>
      <p>Загрузка...</p>
    </div>

    <!-- Main Content -->
    <div id="main-content" class="hidden">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <h1 class="header-title">Записи на парение</h1>
          <div class="header-user">
            <span id="user-name">Загрузка...</span>
            <span id="user-role" class="user-role"></span>
          </div>
        </div>
      </header>

      <!-- Navigation -->
      <nav class="nav">
        <button class="nav-btn active" data-page="today">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="14" height="14" rx="2"/><line x1="3" y1="8" x2="17" y2="8"/>
          </svg>
          <span>Сегодня</span>
        </button>
        <button class="nav-btn" data-page="week">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="14" height="14" rx="2"/><line x1="7" y1="2" x2="7" y2="6"/><line x1="13" y1="2" x2="13" y2="6"/>
          </svg>
          <span>Неделя</span>
        </button>
        <button class="nav-btn" data-page="all">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="4" y1="6" x2="16" y2="6"/><line x1="4" y1="10" x2="16" y2="10"/><line x1="4" y1="14" x2="16" y2="14"/>
          </svg>
          <span>Все</span>
        </button>
      </nav>

      <!-- Pages -->
      <main class="content">
        <!-- Today Page -->
        <div id="page-today" class="page active">
          <div class="page-header">
            <h2>Записи на сегодня</h2>
            <button id="add-booking-btn" class="btn-primary">+ Новая запись</button>
          </div>
          <div id="today-list" class="bookings-list">
            <div class="empty-state">
              <p>Нет записей на сегодня</p>
            </div>
          </div>
        </div>

        <!-- Week Page -->
        <div id="page-week" class="page">
          <div class="page-header">
            <h2>Записи на неделю</h2>
          </div>
          <div id="week-list" class="bookings-list">
            <div class="empty-state">
              <p>Нет записей</p>
            </div>
          </div>
        </div>

        <!-- All Bookings Page -->
        <div id="page-all" class="page">
          <div class="page-header">
            <h2>Все записи</h2>
            <div class="filters">
              <select id="filter-status" class="filter-select">
                <option value="">Все статусы</option>
                <option value="new">Новые</option>
                <option value="confirmed">Подтверждённые</option>
                <option value="in_progress">В процессе</option>
                <option value="completed">Завершённые</option>
                <option value="cancelled">Отменённые</option>
              </select>
            </div>
          </div>
          <div id="all-list" class="bookings-list">
            <div class="empty-state">
              <p>Нет записей</p>
            </div>
          </div>
        </div>
      </main>

      <!-- Stats Bar -->
      <div class="stats-bar">
        <div class="stat-item">
          <span class="stat-value" id="stat-today">0</span>
          <span class="stat-label">Сегодня</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="stat-new">0</span>
          <span class="stat-label">Новых</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="stat-confirmed">0</span>
          <span class="stat-label">Подтв.</span>
        </div>
      </div>
    </div>

    <!-- Booking Modal -->
    <div id="booking-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modal-title">Новая запись</h3>
          <button class="modal-close" onclick="closeModal()">&times;</button>
        </div>
        <form id="booking-form">
          <input type="hidden" id="booking-id">

          <div class="form-row">
            <div class="form-group">
              <label>Дата *</label>
              <input type="date" id="booking-date" required>
            </div>
            <div class="form-group">
              <label>Время *</label>
              <input type="time" id="booking-time" required>
            </div>
          </div>

          <div class="form-group">
            <label>Имя клиента *</label>
            <input type="text" id="client-name" required placeholder="Иван Иванов">
          </div>

          <div class="form-group">
            <label>Телефон *</label>
            <input type="tel" id="client-phone" required placeholder="+7 999 123 45 67">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Тип парения</label>
              <select id="steam-type">
                <option value="">Не указан</option>
                <option value="Классическое">Классическое</option>
                <option value="Веничное">Веничное</option>
                <option value="Ароматическое">Ароматическое</option>
                <option value="Контрастное">Контрастное</option>
                <option value="VIP">VIP</option>
              </select>
            </div>
            <div class="form-group">
              <label>Длительность (мин)</label>
              <input type="number" id="duration" value="60" min="30" step="30">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Кол-во гостей</label>
              <input type="number" id="guests-count" value="1" min="1" max="10">
            </div>
            <div class="form-group">
              <label>Цена</label>
              <input type="number" id="price" placeholder="0" step="100">
            </div>
          </div>

          <div class="form-group">
            <label>Предоплата</label>
            <input type="number" id="prepayment" value="0" step="100">
          </div>

          <div class="form-group">
            <label>Комментарий</label>
            <textarea id="comment" rows="2" placeholder="Дополнительная информация..."></textarea>
          </div>

          <div class="form-actions">
            <button type="button" class="btn-secondary" onclick="closeModal()">Отмена</button>
            <button type="submit" class="btn-primary">Сохранить</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Booking Detail Modal -->
    <div id="detail-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Детали записи</h3>
          <button class="modal-close" onclick="closeDetailModal()">&times;</button>
        </div>
        <div id="detail-content">
          <!-- Filled by JS -->
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>

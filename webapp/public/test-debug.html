<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Test - –ö–ª–∏–∫–∏ –ø–æ –∑–∞–¥–∞—á–∞–º</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #1a1a1a;
            color: white;
        }
        .debug-panel {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .test-btn {
            background: #4CAF50;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-btn:hover {
            background: #45a049;
        }
        .console-output {
            background: #000;
            color: #0f0;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .task-item-test {
            background: #333;
            border: 1px solid #555;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .task-item-test:hover {
            background: #444;
        }
    </style>
</head>
<body>
    <h1>üîß Debug Test - –ö–ª–∏–∫–∏ –ø–æ –∑–∞–¥–∞—á–∞–º</h1>

    <div class="debug-panel">
        <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–µ–ø–ª–æ–µ</h2>
        <p><strong>–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è:</strong> <span id="buildTime"></span></p>
        <p><strong>–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç:</strong> eb78f51 (chore: trigger Railway redeploy)</p>
        <p><strong>–°—Ç–∞—Ç—É—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:</strong> <span id="diagnosticStatus"></span></p>
    </div>

    <div class="debug-panel">
        <h2>–¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π</h2>
        <button class="test-btn" onclick="testShowPage()">üîÑ –¢–µ—Å—Ç showPage('tasks')</button>
        <button class="test-btn" onclick="testLoadTasks()">üìã –¢–µ—Å—Ç loadTasks()</button>
        <button class="test-btn" onclick="testTaskClick()">üñ±Ô∏è –¢–µ—Å—Ç –∫–ª–∏–∫–∞ –ø–æ –∑–∞–¥–∞—á–µ</button>
        <button class="test-btn" onclick="clearConsole()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å</button>
    </div>

    <div class="debug-panel">
        <h2>–¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏</h2>
        <div class="task-item-test" data-task-id="test-1" onclick="testTaskItemClick('test-1')">
            <h3>–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–¥–∞—á–∞ #1</h3>
            <p>–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∑–∞–¥–∞—á–∏. –ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞.</p>
            <span style="color: #4CAF50;">–ù–æ–≤–∞—è</span>
        </div>
        <div class="task-item-test" data-task-id="test-2" onclick="testTaskItemClick('test-2')">
            <h3>–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–¥–∞—á–∞ #2</h3>
            <p>–ï—â–µ –æ–¥–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–ª–∏–∫–æ–≤.</p>
            <span style="color: #FF9800;">–í —Ä–∞–±–æ—Ç–µ</span>
        </div>
    </div>

    <div class="debug-panel">
        <h2>–ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥</h2>
        <div class="console-output" id="consoleOutput"></div>
    </div>

    <script>
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.getElementById('buildTime').textContent = new Date().toLocaleString();

        // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º console.log –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        const originalLog = console.log;
        const consoleOutput = document.getElementById('consoleOutput');

        console.log = function(...args) {
            originalLog.apply(console, args);
            const message = args.map(arg =>
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            consoleOutput.textContent += new Date().toLocaleTimeString() + ': ' + message + '\n';
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        };

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –Ω–∞—à–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
        function checkDiagnosticStatus() {
            const status = [];
            if (typeof showPage === 'function') status.push('‚úÖ showPage');
            else status.push('‚ùå showPage');

            if (typeof loadTasks === 'function') status.push('‚úÖ loadTasks');
            else status.push('‚ùå loadTasks');

            if (typeof openTaskDetail === 'function') status.push('‚úÖ openTaskDetail');
            else status.push('‚ùå openTaskDetail');

            if (typeof handleTaskClick === 'function') status.push('‚úÖ handleTaskClick');
            else status.push('‚ùå handleTaskClick');

            document.getElementById('diagnosticStatus').innerHTML = status.join('<br>');
        }

        // –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function testShowPage() {
            console.log('üß™ –¢–ï–°–¢: –í—ã–∑—ã–≤–∞–µ–º showPage("tasks")...');
            if (typeof showPage === 'function') {
                showPage('tasks');
            } else {
                console.log('‚ùå –§—É–Ω–∫—Ü–∏—è showPage –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
            }
        }

        function testLoadTasks() {
            console.log('üß™ –¢–ï–°–¢: –í—ã–∑—ã–≤–∞–µ–º loadTasks()...');
            if (typeof loadTasks === 'function') {
                loadTasks();
            } else {
                console.log('‚ùå –§—É–Ω–∫—Ü–∏—è loadTasks –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
            }
        }

        function testTaskClick() {
            console.log('üß™ –¢–ï–°–¢: –í—ã–∑—ã–≤–∞–µ–º openTaskDetail("test-123")...');
            if (typeof openTaskDetail === 'function') {
                openTaskDetail('test-123');
            } else {
                console.log('‚ùå –§—É–Ω–∫—Ü–∏—è openTaskDetail –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
            }
        }

        function testTaskItemClick(taskId) {
            console.log('üß™ –¢–ï–°–¢: –ö–ª–∏–∫ –ø–æ —Ç–µ—Å—Ç–æ–≤–æ–π –∑–∞–¥–∞—á–µ:', taskId);
            if (typeof handleTaskClick === 'function') {
                handleTaskClick(taskId);
            } else if (typeof openTaskDetail === 'function') {
                openTaskDetail(taskId);
            } else {
                console.log('‚ùå –§—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã!');
            }
        }

        function clearConsole() {
            consoleOutput.textContent = '';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        console.log('üîß Debug —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        console.log('üìÖ –í—Ä–µ–º—è:', new Date().toLocaleString());
        console.log('üåê URL:', window.location.href);

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
        setTimeout(checkDiagnosticStatus, 1000);
    </script>
</body>
</html>
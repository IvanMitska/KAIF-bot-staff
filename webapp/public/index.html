<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover, maximum-scale=1.0">
    <title>KAIF Staff App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Critical Fix - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ü–ï–†–í–´–ú -->
    <script src="critical-fix.js"></script>
    <!-- Telegram Fix Script - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ critical fix -->
    <script src="telegram-fix.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="improved-calendar.css">
    <link rel="stylesheet" href="nav-ios-liquid.css">
    <link rel="stylesheet" href="nav-fix-flicker.css">
    <link rel="stylesheet" href="profile-fix.css">
    <link rel="stylesheet" href="admin-panel-liquid.css">
    <link rel="stylesheet" href="dashboard-redesign.css">
    <link rel="stylesheet" href="dashboard-fix.css">
    <link rel="stylesheet" href="dashboard-enhanced.css">
    <link rel="stylesheet" href="custom-select.css">
    <link rel="stylesheet" href="scroll-fix.css">
    <link rel="stylesheet" href="employee-dropdown.css">
    <link rel="stylesheet" href="select-override.css">
    <!-- –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê - –î–û–õ–ñ–ù–û –ë–´–¢–¨ –ü–û–°–õ–ï–î–ù–ò–ú -->
    <link rel="stylesheet" href="modal-critical-fix.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <!-- –§–æ–Ω–æ–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è -->
    <div class="background-animation"></div>
    
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navigation">
        <div class="nav-indicator"></div>
        <button class="nav-btn active" onclick="showPage('home')" data-page="home">
            <div class="nav-icon-wrapper">
                <i data-lucide="home"></i>
            </div>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </button>
        <button class="nav-btn" onclick="showPage('report')" data-page="report">
            <div class="nav-icon-wrapper">
                <i data-lucide="file-text"></i>
            </div>
            <span class="nav-label">–û—Ç—á–µ—Ç—ã</span>
        </button>
        <button class="nav-btn" onclick="showPage('tasks')" data-page="tasks">
            <div class="nav-icon-wrapper">
                <i data-lucide="check-square"></i>
                <span class="nav-badge" id="tasksBadge" style="display: none;"></span>
            </div>
            <span class="nav-label">–ó–∞–¥–∞—á–∏</span>
        </button>
        <button class="nav-btn" onclick="showPage('stats')" data-page="stats">
            <div class="nav-icon-wrapper">
                <i data-lucide="bar-chart-3"></i>
            </div>
            <span class="nav-label">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
        </button>
        <button class="nav-btn" onclick="showPage('profile')" data-page="profile">
            <div class="nav-icon-wrapper">
                <i data-lucide="user"></i>
            </div>
            <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </button>
    </nav>
    
    <!-- –ü–ª–∞–≤–∞—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="floating-actions">
        <button class="fab-main" id="fabMain" onclick="toggleFab()">
            <i data-lucide="plus"></i>
        </button>
        <div class="fab-menu" id="fabMenu">
            <button class="fab-item" onclick="showPage('report'); toggleFab()">
                <i data-lucide="file-text"></i>
                <span>–û—Ç—á–µ—Ç</span>
            </button>
            <button class="fab-item" onclick="showCreateTaskModal(); toggleFab()">
                <i data-lucide="plus-circle"></i>
                <span>–ó–∞–¥–∞—á–∞</span>
            </button>
        </div>
    </div>
    
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div id="home" class="page active">
            <div class="page-header">
                <div class="welcome-section">
                    <div class="greeting-wrapper">
                        <h1 class="greeting-text">
                            –ü—Ä–∏–≤–µ—Ç, <span id="userName" class="user-name">Ivan</span>! 
                            <span class="greeting-emoji">üëã</span>
                        </h1>
                        <p class="welcome-subtitle">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ KAIF Staff</p>
                    </div>
                </div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ —É—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ -->
            <div class="attendance-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i data-lucide="clock" class="section-icon"></i>
                        –£—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
                    </h2>
                </div>
                <div class="attendance-buttons">
                    <button id="checkInBtn" onclick="checkIn()" class="attendance-btn check-in">
                        <div class="btn-icon-wrapper">
                            <i data-lucide="log-in" class="btn-icon"></i>
                        </div>
                        <div class="btn-text">
                            <span class="btn-label">–ü—Ä–∏—à–µ–ª –Ω–∞ —Ä–∞–±–æ—Ç—É</span>
                            <span id="checkInTime" class="btn-time"></span>
                        </div>
                        <div class="btn-ripple"></div>
                    </button>
                    <button id="checkOutBtn" onclick="checkOut()" class="attendance-btn check-out">
                        <div class="btn-icon-wrapper">
                            <i data-lucide="log-out" class="btn-icon"></i>
                        </div>
                        <div class="btn-text">
                            <span class="btn-label">–£—à–µ–ª —Å —Ä–∞–±–æ—Ç—ã</span>
                            <span id="checkOutTime" class="btn-time"></span>
                        </div>
                        <div class="btn-ripple"></div>
                    </button>
                </div>
            </div>
            
            <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
            <div class="quick-actions">
                <div class="section-header">
                    <h2 class="section-title">
                        <i data-lucide="zap" class="section-icon"></i>
                        –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
                    </h2>
                </div>
                <div class="action-grid">
                    <div class="action-card" onclick="showPage('report')">
                        <div class="action-icon-wrapper">
                            <i data-lucide="file-text" class="action-icon"></i>
                        </div>
                        <div class="action-content">
                            <h3>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç</h3>
                            <p>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–∞–±–æ—Ç–µ</p>
                        </div>
                        <div class="action-arrow">
                            <i data-lucide="chevron-right"></i>
                        </div>
                    </div>
                    
                    <div class="action-card" onclick="showPage('tasks')">
                        <div class="action-icon-wrapper">
                            <i data-lucide="check-square" class="action-icon"></i>
                        </div>
                        <div class="action-content">
                            <h3>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h3>
                            <p><span id="activeTasksCount">0</span> –∞–∫—Ç–∏–≤–Ω—ã—Ö</p>
                        </div>
                        <div class="action-arrow">
                            <i data-lucide="chevron-right"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –°—Ç–∞—Ç—É—Å –¥–Ω—è -->
            <div class="daily-status">
                <div class="section-header">
                    <h2 class="section-title">
                        <i data-lucide="calendar" class="section-icon"></i>
                        –°—Ç–∞—Ç—É—Å –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
                    </h2>
                </div>
                <div class="status-grid">
                    <div id="reportStatusItem" class="status-item warning">
                        <div class="status-icon-wrapper">
                            <i data-lucide="alert-circle"></i>
                        </div>
                        <div class="status-content">
                            <span class="status-text">–û—Ç—á–µ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω</span>
                        </div>
                    </div>
                    <div id="attendanceStatusItem" class="status-item loading">
                        <div class="status-icon-wrapper">
                            <i data-lucide="clock"></i>
                        </div>
                        <div class="status-content">
                            <span class="status-text">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç—á–µ—Ç–æ–≤ -->
        <div id="report" class="page">
            <div class="page-header">
                <button class="back-btn" onclick="showPage('home')">
                    <i data-lucide="arrow-left"></i>
                    <span>–ù–∞–∑–∞–¥</span>
                </button>
                
                <div class="page-title-section">
                    <h1 class="page-title">
                        <i data-lucide="file-text" class="title-icon"></i>
                        –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç
                    </h1>
                    <p id="reportDate" class="page-subtitle">2 –∞–≤–≥—É—Å—Ç–∞ 2025</p>
                </div>
            </div>
            
            <form id="reportForm" class="modern-form">
                <div class="form-card">
                    <div class="form-group">
                        <label class="form-label">
                            <i data-lucide="edit-3" class="label-icon"></i>
                            –ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏ —Å–µ–≥–æ–¥–Ω—è?
                        </label>
                        <textarea name="whatDone" required placeholder="–û–ø–∏—à–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É..." class="form-textarea"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">
                            <i data-lucide="alert-triangle" class="label-icon"></i>
                            –ö–∞–∫–∏–µ –±—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã?
                        </label>
                        <textarea name="problems" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ '–Ω–µ—Ç'..." class="form-textarea"></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">
                        <span class="btn-text">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç</span>
                        <i data-lucide="send" class="btn-icon"></i>
                        <div class="btn-ripple"></div>
                    </button>
                </div>
            </form>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–¥–∞—á -->
        <div id="tasks" class="page">
            <div class="page-header">
                <button class="back-btn" onclick="showPage('home')">
                    <i data-lucide="arrow-left"></i>
                    <span>–ù–∞–∑–∞–¥</span>
                </button>
                
                <div class="page-title-section">
                    <h1 class="page-title">
                        <i data-lucide="check-square" class="title-icon"></i>
                        –ú–æ–∏ –∑–∞–¥–∞—á–∏
                    </h1>
                    <button id="createTaskBtn" class="create-task-btn" onclick="showCreateTaskModal()" style="display: none;">
                        <i data-lucide="plus"></i>
                        <span>–°–æ–∑–¥–∞—Ç—å</span>
                    </button>
                </div>
            </div>
            
            <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–∏–ø–∞ –∑–∞–¥–∞—á -->
            <div class="task-type-switcher">
                <button id="myTasksBtn" class="task-type-btn active" onclick="switchTaskType('my')">
                    <i data-lucide="inbox" class="btn-icon"></i>
                    <span>–ú–æ–∏ –∑–∞–¥–∞—á–∏</span>
                </button>
                <button id="createdTasksBtn" class="task-type-btn" onclick="switchTaskType('created')" style="display: none;">
                    <i data-lucide="send" class="btn-icon"></i>
                    <span>–ü–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ</span>
                </button>
            </div>
            
            <!-- –§–∏–ª—å—Ç—Ä—ã –∑–∞–¥–∞—á -->
            <div class="task-filters">
                <button class="filter-btn active" onclick="filterTasks('all', event)">
                    <span class="filter-text">–í—Å–µ</span>
                    <span class="count">0</span>
                </button>
                <button class="filter-btn" onclick="filterTasks('new', event)">
                    <div class="filter-indicator new"></div>
                    <span class="filter-text">–ù–æ–≤—ã–µ</span>
                    <span class="count">0</span>
                </button>
                <button class="filter-btn" onclick="filterTasks('in-progress', event)">
                    <div class="filter-indicator in-progress"></div>
                    <span class="filter-text">–í —Ä–∞–±–æ—Ç–µ</span>
                    <span class="count">0</span>
                </button>
                <button class="filter-btn" onclick="filterTasks('completed', event)">
                    <div class="filter-indicator completed"></div>
                    <span class="filter-text">–í—ã–ø–æ–ª–Ω–µ–Ω—ã</span>
                    <span class="count">0</span>
                </button>
            </div>
            
            <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
            <div id="tasksList" class="tasks-container">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á...</p>
                </div>
                <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ -->
                <div style="text-align: center; padding: 20px; display: none;" id="tasksErrorContainer">
                    <button onclick="forceLoadTasks()" style="
                        padding: 12px 24px;
                        background: var(--primary-color, #667eea);
                        color: white;
                        border: none;
                        border-radius: 8px;
                        cursor: pointer;
                        font-size: 14px;
                        font-weight: 500;
                    ">
                        üîÑ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–¥–∞—á–∏
                    </button>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <div id="stats" class="page">
            <div class="page-header">
                <button class="back-btn" onclick="showPage('home')">
                    <i data-lucide="arrow-left"></i>
                    <span>–ù–∞–∑–∞–¥</span>
                </button>
                
                <div class="page-title-section">
                    <h1 class="page-title">
                        <i data-lucide="bar-chart-3" class="title-icon"></i>
                        –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                    </h1>
                </div>
            </div>
            
            <div class="stats-overview">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <i data-lucide="calendar" class="stat-icon"></i>
                            <div class="stat-trend positive">
                                <i data-lucide="trending-up"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="totalReports">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –æ—Ç—á–µ—Ç–æ–≤</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <i data-lucide="check-circle" class="stat-icon"></i>
                            <div class="stat-trend positive">
                                <i data-lucide="trending-up"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="completedTasks">0</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <i data-lucide="flame" class="stat-icon"></i>
                            <div class="stat-trend neutral">
                                <i data-lucide="minus"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="currentStreak">0</div>
                        <div class="stat-label">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <i data-lucide="activity" class="stat-icon"></i>
                            <div class="stat-trend positive">
                                <i data-lucide="trending-up"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="completionRate">0%</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="profile" class="page">
            <div class="page-header">
                <button class="back-btn" onclick="showPage('home')">
                    <i data-lucide="arrow-left"></i>
                    <span>–ù–∞–∑–∞–¥</span>
                </button>
                
                <div class="page-title-section">
                    <h1 class="page-title">
                        <i data-lucide="user" class="title-icon"></i>
                        –ü—Ä–æ—Ñ–∏–ª—å
                    </h1>
                </div>
            </div>
            
            <div class="profile-content">
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
                <div class="profile-card">
                    <div class="profile-avatar">
                        <i data-lucide="user" class="avatar-icon"></i>
                    </div>
                    <div class="profile-info">
                        <h2 id="profileName" class="profile-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                        <p id="profilePosition" class="profile-position">...</p>
                        <div class="profile-id">
                            <i data-lucide="hash" class="id-icon"></i>
                            <span id="profileId">...</span>
                        </div>
                    </div>
                </div>
                
                <!-- –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
                <div class="profile-actions">
                    <div id="managerSection" class="manager-section" style="display: none;">
                        <div class="action-card admin-card" onclick="showAdminPanel()">
                            <div class="action-icon-wrapper">
                                <i data-lucide="settings" class="action-icon"></i>
                            </div>
                            <div class="action-content">
                                <h3>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>
                                <p>–û—Ç—á–µ—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</p>
                            </div>
                            <div class="action-arrow">
                                <i data-lucide="chevron-right"></i>
                            </div>
                        </div>
                        
                        <div class="action-card" onclick="showEmployees()">
                            <div class="action-icon-wrapper">
                                <i data-lucide="users" class="action-icon"></i>
                            </div>
                            <div class="action-content">
                                <h3>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h3>
                                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π</p>
                            </div>
                            <div class="action-arrow">
                                <i data-lucide="chevron-right"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="action-card help-card" onclick="showHelp()">
                        <div class="action-icon-wrapper">
                            <i data-lucide="help-circle" class="action-icon"></i>
                        </div>
                        <div class="action-content">
                            <h3>–ü–æ–º–æ—â—å</h3>
                            <p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞</p>
                        </div>
                        <div class="action-arrow">
                            <i data-lucide="chevron-right"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤) -->
        <div id="employees" class="page">
            <button class="back-btn" onclick="showPage('profile')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header">
                <h1>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h1>
                <p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</p>
            </div>
            
            <div id="employeesList">
                <div class="loading">
                    <div class="spinner"></div>
                    <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–¥–∞—á–∏ -->
        <div id="taskDetail" class="page">
            <div class="page-header">
                <button class="back-btn" onclick="showPage('tasks')">
                    <i data-lucide="arrow-left"></i>
                    <span>–ö –∑–∞–¥–∞—á–∞–º</span>
                </button>
            </div>
            
            <div class="task-detail-content">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á–∏...</p>
                </div>
            </div>
        </div>
        
        <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤) -->
        <div id="adminPanel" class="page">
            <div class="page-header admin-header">
                <button class="back-btn" onclick="showPage('profile')">
                    <i data-lucide="arrow-left"></i>
                    <span>–ù–∞–∑–∞–¥</span>
                </button>
                
                <div class="page-title-section">
                    <h1 class="page-title">
                        <i data-lucide="shield" class="title-icon"></i>
                        –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
                    </h1>
                    <p class="page-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π</p>
                </div>
                
                <!-- Real-time status indicator -->
                <div class="admin-status-indicator">
                    <div class="status-dot active"></div>
                    <span class="status-text">Online</span>
                </div>
            </div>
            
            <!-- Enhanced Navigation Tabs -->
            <div class="admin-tabs-container">
                <div class="admin-tabs-wrapper">
                    <button id="dashboardTab" class="admin-tab active" onclick="switchAdminTab('dashboard')" data-tab="dashboard">
                        <div class="tab-icon-wrapper">
                            <i data-lucide="pie-chart" class="tab-icon"></i>
                        </div>
                        <div class="tab-content">
                            <span class="tab-label">Dashboard</span>
                            <span class="tab-sublabel">–û–±–∑–æ—Ä</span>
                        </div>
                    </button>
                    <button id="reportsTab" class="admin-tab" onclick="switchAdminTab('reports')" data-tab="reports">
                        <div class="tab-icon-wrapper">
                            <i data-lucide="file-bar-chart" class="tab-icon"></i>
                        </div>
                        <div class="tab-content">
                            <span class="tab-label">–û—Ç—á–µ—Ç—ã</span>
                            <span class="tab-sublabel">–ê–Ω–∞–ª–∏–∑</span>
                        </div>
                    </button>
                    <button id="attendanceTab" class="admin-tab" onclick="switchAdminTab('attendance')" data-tab="attendance">
                        <div class="tab-icon-wrapper">
                            <i data-lucide="clock" class="tab-icon"></i>
                        </div>
                        <div class="tab-content">
                            <span class="tab-label">–í—Ä–µ–º—è</span>
                            <span class="tab-sublabel">–ü—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ</span>
                        </div>
                    </button>
                </div>
            </div>
            
            <!-- Dashboard –≤–∫–ª–∞–¥–∫–∞ -->
            <div id="dashboardContent" class="admin-tab-content dashboard-content" style="display: block;">
                <!-- Enhanced Key Metrics with Real-time Updates -->
                <div class="admin-metrics-grid">
                    <div class="metric-card primary">
                        <div class="metric-header">
                            <div class="metric-icon-wrapper">
                                <i data-lucide="calendar-check" class="metric-icon"></i>
                            </div>
                            <div class="metric-trend positive">
                                <i data-lucide="trending-up"></i>
                                <span class="trend-value">+12%</span>
                            </div>
                        </div>
                        <div class="metric-content">
                            <div class="metric-value" id="dashboardTodayReports">0</div>
                            <div class="metric-label">–û—Ç—á–µ—Ç–æ–≤ —Å–µ–≥–æ–¥–Ω—è</div>
                            <div class="metric-sublabel">–∏–∑ 8 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</div>
                        </div>
                        <div class="metric-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 75%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="metric-card warning">
                        <div class="metric-header">
                            <div class="metric-icon-wrapper">
                                <i data-lucide="alert-triangle" class="metric-icon"></i>
                            </div>
                            <div class="metric-trend negative">
                                <i data-lucide="trending-down"></i>
                                <span class="trend-value">-3</span>
                            </div>
                        </div>
                        <div class="metric-content">
                            <div class="metric-value" id="dashboardMissingReports">0</div>
                            <div class="metric-label">–ë–µ–∑ –æ—Ç—á–µ—Ç–æ–≤</div>
                            <div class="metric-sublabel">—Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è</div>
                        </div>
                        <div class="metric-actions">
                            <button class="metric-action-btn" onclick="showMissingReports()">
                                <i data-lucide="eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="metric-card success">
                        <div class="metric-header">
                            <div class="metric-icon-wrapper">
                                <i data-lucide="clipboard-list" class="metric-icon"></i>
                            </div>
                            <div class="metric-trend positive">
                                <i data-lucide="activity"></i>
                                <span class="trend-value">85%</span>
                            </div>
                        </div>
                        <div class="metric-content">
                            <div class="metric-value" id="dashboardActiveTasks">0</div>
                            <div class="metric-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á</div>
                            <div class="metric-sublabel">–≤ —Ä–∞–±–æ—Ç–µ</div>
                        </div>
                        <div class="metric-chart">
                            <svg width="60" height="30" viewBox="0 0 60 30">
                                <polyline fill="none" stroke="rgba(34, 197, 94, 0.5)" stroke-width="2" points="0,25 10,20 20,15 30,12 40,8 50,5 60,3"/>
                            </svg>
                        </div>
                    </div>
                    
                    <div class="metric-card info">
                        <div class="metric-header">
                            <div class="metric-icon-wrapper">
                                <i data-lucide="check-circle" class="metric-icon"></i>
                            </div>
                            <div class="metric-trend positive">
                                <i data-lucide="zap"></i>
                                <span class="trend-value">+5</span>
                            </div>
                        </div>
                        <div class="metric-content">
                            <div class="metric-value" id="dashboardCompletedToday">0</div>
                            <div class="metric-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è</div>
                            <div class="metric-sublabel">–æ—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!</div>
                        </div>
                        <div class="metric-sparkline">
                            <div class="sparkline-bar" style="height: 20%"></div>
                            <div class="sparkline-bar" style="height: 40%"></div>
                            <div class="sparkline-bar" style="height: 80%"></div>
                            <div class="sparkline-bar" style="height: 60%"></div>
                            <div class="sparkline-bar" style="height: 100%"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Enhanced Activity Chart -->
                <div class="activity-chart-container">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">
                                <i data-lucide="trending-up" class="chart-icon"></i>
                                –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –Ω–µ–¥–µ–ª—é
                            </h3>
                            <div class="chart-controls">
                                <div class="custom-select-wrapper chart-select">
                                    <select class="custom-select chart-period-selector" id="chartPeriodSelector">
                                        <option value="week">–ù–µ–¥–µ–ª—è</option>
                                        <option value="month">–ú–µ—Å—è—Ü</option>
                                        <option value="quarter">–ö–≤–∞—Ä—Ç–∞–ª</option>
                                    </select>
                                    <div class="select-arrow">
                                        <i data-lucide="chevron-down"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chart-legend">
                            <div class="legend-item">
                                <div class="legend-color" style="background: var(--admin-primary);"></div>
                                <span class="legend-label">–û—Ç—á–µ—Ç—ã</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: var(--admin-success);"></div>
                                <span class="legend-label">–ó–∞–¥–∞—á–∏</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: var(--admin-info);"></div>
                                <span class="legend-label">–†–∞–±–æ—á–∏–µ —á–∞—Å—ã</span>
                            </div>
                        </div>
                        
                        <div id="activityChart" class="interactive-chart">
                            <div class="chart-placeholder">
                                <div class="chart-bars">
                                    <div class="chart-day">
                                        <div class="day-bars">
                                            <div class="chart-bar reports" style="height: 85%;" data-value="6"></div>
                                            <div class="chart-bar tasks" style="height: 70%;" data-value="14"></div>
                                            <div class="chart-bar hours" style="height: 95%;" data-value="8.5"></div>
                                        </div>
                                        <div class="chart-label">–ü–Ω</div>
                                    </div>
                                    <div class="chart-day">
                                        <div class="day-bars">
                                            <div class="chart-bar reports" style="height: 100%;" data-value="8"></div>
                                            <div class="chart-bar tasks" style="height: 80%;" data-value="16"></div>
                                            <div class="chart-bar hours" style="height: 90%;" data-value="8.0"></div>
                                        </div>
                                        <div class="chart-label">–í—Ç</div>
                                    </div>
                                    <div class="chart-day">
                                        <div class="day-bars">
                                            <div class="chart-bar reports" style="height: 75%;" data-value="6"></div>
                                            <div class="chart-bar tasks" style="height: 90%;" data-value="18"></div>
                                            <div class="chart-bar hours" style="height: 85%;" data-value="7.5"></div>
                                        </div>
                                        <div class="chart-label">–°—Ä</div>
                                    </div>
                                    <div class="chart-day">
                                        <div class="day-bars">
                                            <div class="chart-bar reports" style="height: 90%;" data-value="7"></div>
                                            <div class="chart-bar tasks" style="height: 75%;" data-value="15"></div>
                                            <div class="chart-bar hours" style="height: 100%;" data-value="9.0"></div>
                                        </div>
                                        <div class="chart-label">–ß—Ç</div>
                                    </div>
                                    <div class="chart-day">
                                        <div class="day-bars">
                                            <div class="chart-bar reports" style="height: 95%;" data-value="7"></div>
                                            <div class="chart-bar tasks" style="height: 85%;" data-value="17"></div>
                                            <div class="chart-bar hours" style="height: 80%;" data-value="7.0"></div>
                                        </div>
                                        <div class="chart-label">–ü—Ç</div>
                                    </div>
                                    <div class="chart-day">
                                        <div class="day-bars">
                                            <div class="chart-bar reports" style="height: 40%;" data-value="3"></div>
                                            <div class="chart-bar tasks" style="height: 30%;" data-value="6"></div>
                                            <div class="chart-bar hours" style="height: 25%;" data-value="2.5"></div>
                                        </div>
                                        <div class="chart-label">–°–±</div>
                                    </div>
                                    <div class="chart-day">
                                        <div class="day-bars">
                                            <div class="chart-bar reports" style="height: 20%;" data-value="1"></div>
                                            <div class="chart-bar tasks" style="height: 15%;" data-value="3"></div>
                                            <div class="chart-bar hours" style="height: 10%;" data-value="1.0"></div>
                                        </div>
                                        <div class="chart-label">–í—Å</div>
                                    </div>
                                </div>
                                
                                <div class="chart-tooltip" id="chartTooltip">
                                    <div class="tooltip-content">
                                        <div class="tooltip-title">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</div>
                                        <div class="tooltip-data">
                                            <div class="tooltip-item">
                                                <span class="tooltip-color" style="background: var(--admin-primary);"></span>
                                                –û—Ç—á–µ—Ç—ã: <strong>6</strong>
                                            </div>
                                            <div class="tooltip-item">
                                                <span class="tooltip-color" style="background: var(--admin-success);"></span>
                                                –ó–∞–¥–∞—á–∏: <strong>14</strong>
                                            </div>
                                            <div class="tooltip-item">
                                                <span class="tooltip-color" style="background: var(--admin-info);"></span>
                                                –ß–∞—Å—ã: <strong>8.5</strong>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chart-summary">
                            <div class="summary-item">
                                <div class="summary-value">37</div>
                                <div class="summary-label">–í—Å–µ–≥–æ –æ—Ç—á–µ—Ç–æ–≤</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value">89</div>
                                <div class="summary-label">–ó–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value">41.5</div>
                                <div class="summary-label">–ß–∞—Å–æ–≤ –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <!-- –¢–æ–ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
                    <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px;">
                        <h3 style="margin-bottom: 16px; font-size: 18px;">üèÜ –¢–æ–ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
                        <div id="topEmployees">
                            <div class="loading">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á -->
                    <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px;">
                        <h3 style="margin-bottom: 16px; font-size: 18px;">üìã –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á</h3>
                        <div id="tasksStatus">
                            <div class="loading">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –£—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px; margin-top: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px;">‚è∞ –ü—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
                    <div id="attendanceStatus">
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <!-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±–µ–∑ –æ—Ç—á–µ—Ç–æ–≤ -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px; margin-top: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px; color: var(--warning);">‚ö†Ô∏è –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±–µ–∑ –æ—Ç—á–µ—Ç–æ–≤ —Å–µ–≥–æ–¥–Ω—è</h3>
                    <div id="missingReportsList">
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <!-- –û—Ç—á–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∑–∞ —Å–µ–≥–æ–¥–Ω—è -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px; margin-top: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px;">üìù –û—Ç—á–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∑–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
                    <div id="todayReportsList">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–æ–≤...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –û—Ç—á–µ—Ç—ã –≤–∫–ª–∞–¥–∫–∞ -->
            <div id="reportsContent" class="admin-tab-content" style="display: none;">
                <!-- –§–∏–ª—å—Ç—Ä—ã -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 16px; margin-bottom: 24px;">
                    <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–ü–µ—Ä–∏–æ–¥</label>
                            <div class="custom-select-wrapper">
                                <select id="periodFilter" onchange="updateAdminPanel()" class="custom-select">
                                    <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                                    <option value="week">–≠—Ç–∞ –Ω–µ–¥–µ–ª—è</option>
                                    <option value="month">–≠—Ç–æ—Ç –º–µ—Å—è—Ü</option>
                                    <option value="custom">–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—ã</option>
                                </select>
                                <div class="select-arrow">
                                    <i data-lucide="chevron-down"></i>
                                </div>
                            </div>
                        </div>
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</label>
                            <div class="custom-select-wrapper">
                                <select id="employeeFilter" onchange="updateAdminPanel()" class="custom-select">
                                    <option value="all">–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</option>
                                </select>
                                <div class="select-arrow">
                                    <i data-lucide="chevron-down"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="customDateRange" style="display: none; gap: 12px;">
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–°</label>
                            <input type="date" id="startDate" onchange="updateAdminPanel()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                        </div>
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–ü–æ</label>
                            <input type="date" id="endDate" onchange="updateAdminPanel()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                        </div>
                    </div>
                </div>
                
                <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="stats-grid" style="margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-icon">üìù</div>
                        <div class="stat-value" id="adminTotalReports">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –æ—Ç—á–µ—Ç–æ–≤</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-value" id="adminActiveEmployees">0</div>
                        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-value" id="adminCompletedTasks">0</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-value" id="adminTodayReports">0</div>
                        <div class="stat-label">–û—Ç—á–µ—Ç–æ–≤ —Å–µ–≥–æ–¥–Ω—è</div>
                    </div>
                </div>
                
                <!-- –°–ø–∏—Å–æ–∫ –æ—Ç—á–µ—Ç–æ–≤ -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px;">–û—Ç—á–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
                    <div id="adminReportsList">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–æ–≤...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Enhanced Time Tracking Tab -->
            <div id="attendanceContent" class="admin-tab-content" style="display: none;">
                <!-- Enhanced Filters with Modern Design -->
                <div class="attendance-filters-container">
                    <div class="filters-card">
                        <div class="filters-header">
                            <h3 class="filters-title">
                                <i data-lucide="filter" class="filters-icon"></i>
                                –§–∏–ª—å—Ç—Ä—ã
                            </h3>
                            <button class="filters-reset" onclick="resetAttendanceFilters()">
                                <i data-lucide="rotate-ccw"></i>
                                –°–±—Ä–æ—Å–∏—Ç—å
                            </button>
                        </div>
                        
                        <div class="filters-grid">
                            <div class="filter-group">
                                <label class="filter-label">
                                    <i data-lucide="calendar" class="label-icon"></i>
                                    –ü–µ—Ä–∏–æ–¥
                                </label>
                                <div class="custom-select-wrapper">
                                    <select id="attendancePeriodFilter" onchange="updateAttendanceHistory()" class="custom-select">
                                        <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                                        <option value="week" selected>–≠—Ç–∞ –Ω–µ–¥–µ–ª—è</option>
                                        <option value="month">–≠—Ç–æ—Ç –º–µ—Å—è—Ü</option>
                                        <option value="custom">–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—ã</option>
                                    </select>
                                    <div class="select-arrow">
                                        <i data-lucide="chevron-down"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label">
                                    <i data-lucide="user" class="label-icon"></i>
                                    –°–æ—Ç—Ä—É–¥–Ω–∏–∫
                                </label>
                                <div class="custom-select-wrapper">
                                    <select id="attendanceEmployeeFilter" onchange="updateAttendanceHistory()" class="custom-select">
                                        <option value="all">–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</option>
                                    </select>
                                    <div class="select-arrow">
                                        <i data-lucide="chevron-down"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label">
                                    <i data-lucide="clock" class="label-icon"></i>
                                    –°—Ç–∞—Ç—É—Å
                                </label>
                                <div class="custom-select-wrapper">
                                    <select id="attendanceStatusFilter" onchange="updateAttendanceHistory()" class="custom-select">
                                        <option value="all">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                                        <option value="present">–ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç</option>
                                        <option value="late">–û–ø–æ–∑–¥–∞–Ω–∏—è</option>
                                        <option value="absent">–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</option>
                                    </select>
                                    <div class="select-arrow">
                                        <i data-lucide="chevron-down"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="attendanceCustomDateRange" class="custom-date-range" style="display: none;">
                            <div class="date-input-group">
                                <label class="filter-label">
                                    <i data-lucide="calendar" class="label-icon"></i>
                                    –°
                                </label>
                                <input type="date" id="attendanceStartDate" onchange="updateAttendanceHistory()" class="date-input">
                            </div>
                            <div class="date-input-group">
                                <label class="filter-label">
                                    <i data-lucide="calendar" class="label-icon"></i>
                                    –ü–æ
                                </label>
                                <input type="date" id="attendanceEndDate" onchange="updateAttendanceHistory()" class="date-input">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Enhanced Time Tracking Statistics -->
                <div class="time-stats-container">
                    <div class="time-stats-grid">
                        <div class="time-stat-card primary">
                            <div class="stat-header">
                                <div class="stat-icon-wrapper">
                                    <i data-lucide="calendar-days" class="stat-icon"></i>
                                </div>
                                <div class="stat-trend positive">
                                    <i data-lucide="trending-up"></i>
                                </div>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="attendanceTotalDays">0</div>
                                <div class="stat-label">–†–∞–±–æ—á–∏—Ö –¥–Ω–µ–π</div>
                                <div class="stat-sublabel">–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –ø–µ—Ä–∏–æ–¥–µ</div>
                            </div>
                        </div>
                        
                        <div class="time-stat-card success">
                            <div class="stat-header">
                                <div class="stat-icon-wrapper">
                                    <i data-lucide="clock" class="stat-icon"></i>
                                </div>
                                <div class="stat-additional">
                                    <span class="additional-info">160h</span>
                                </div>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="attendanceTotalHours">0</div>
                                <div class="stat-label">–ß–∞—Å–æ–≤ –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
                                <div class="stat-sublabel">–∏–∑ –ø–ª–∞–Ω–æ–≤—ã—Ö</div>
                            </div>
                            <div class="stat-progress">
                                <div class="progress-circle">
                                    <svg class="progress-ring" width="40" height="40">
                                        <circle class="progress-ring-circle" stroke="rgba(34, 197, 94, 0.2)" stroke-width="3" fill="transparent" r="16" cx="20" cy="20"/>
                                        <circle class="progress-ring-circle" stroke="rgb(34, 197, 94)" stroke-width="3" fill="transparent" r="16" cx="20" cy="20" stroke-dasharray="100.48" stroke-dashoffset="25.12"/>
                                    </svg>
                                    <span class="progress-text">75%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="time-stat-card warning">
                            <div class="stat-header">
                                <div class="stat-icon-wrapper">
                                    <i data-lucide="alert-circle" class="stat-icon"></i>
                                </div>
                                <div class="stat-trend negative">
                                    <i data-lucide="arrow-up"></i>
                                </div>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="attendanceLateCount">0</div>
                                <div class="stat-label">–û–ø–æ–∑–¥–∞–Ω–∏–π</div>
                                <div class="stat-sublabel">—Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è</div>
                            </div>
                            <div class="stat-actions">
                                <button class="stat-action-btn" onclick="showLateEmployees()" title="–ü–æ–∫–∞–∑–∞—Ç—å –æ–ø–æ–∑–¥–∞–≤—à–∏—Ö">
                                    <i data-lucide="users"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="time-stat-card info">
                            <div class="stat-header">
                                <div class="stat-icon-wrapper">
                                    <i data-lucide="bar-chart-3" class="stat-icon"></i>
                                </div>
                                <div class="stat-badge">
                                    <span class="badge good">–•–æ—Ä–æ—à–æ</span>
                                </div>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="attendanceAvgHours">0</div>
                                <div class="stat-label">–ß–∞—Å–æ–≤ –≤ –¥–µ–Ω—å</div>
                                <div class="stat-sublabel">–≤ —Å—Ä–µ–¥–Ω–µ–º</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Real-time Attendance Status -->
                <div class="realtime-attendance-container">
                    <div class="realtime-card">
                        <div class="realtime-header">
                            <h3 class="realtime-title">
                                <i data-lucide="activity" class="realtime-icon"></i>
                                –¢–µ–∫—É—â–µ–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ
                                <span class="live-indicator">
                                    <span class="live-dot"></span>
                                    Live
                                </span>
                            </h3>
                            <button class="refresh-btn" onclick="refreshRealTimeData()" title="–û–±–Ω–æ–≤–∏—Ç—å">
                                <i data-lucide="refresh-cw"></i>
                            </button>
                        </div>
                        
                        <div class="realtime-stats">
                            <div class="realtime-stat">
                                <div class="realtime-value" id="currentlyPresent">0</div>
                                <div class="realtime-label">–ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç</div>
                                <div class="status-indicator online"></div>
                            </div>
                            <div class="realtime-stat">
                                <div class="realtime-value" id="currentlyLate">0</div>
                                <div class="realtime-label">–û–ø–∞–∑–¥—ã–≤–∞—é—Ç</div>
                                <div class="status-indicator late"></div>
                            </div>
                            <div class="realtime-stat">
                                <div class="realtime-value" id="currentlyAbsent">0</div>
                                <div class="realtime-label">–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</div>
                                <div class="status-indicator offline"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Enhanced Time Tracking History -->
                <div class="attendance-history-container">
                    <div class="history-card">
                        <div class="history-header">
                            <h3 class="history-title">
                                <i data-lucide="clock-4" class="history-icon"></i>
                                –ò—Å—Ç–æ—Ä–∏—è —É—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏
                            </h3>
                            <div class="history-controls">
                                <button class="history-control-btn" onclick="exportAttendanceData()" title="–≠–∫—Å–ø–æ—Ä—Ç">
                                    <i data-lucide="download"></i>
                                </button>
                                <button class="history-control-btn" onclick="printAttendanceReport()" title="–ü–µ—á–∞—Ç—å">
                                    <i data-lucide="printer"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="history-timeline" id="attendanceHistoryList">
                            <div class="loading">
                                <div class="loading-spinner"></div>
                                <p class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <!-- –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <div id="taskModal" class="modal-overlay hidden">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-title-section">
                    <div class="modal-icon">
                        <i data-lucide="plus-circle"></i>
                    </div>
                    <h2 class="modal-title">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h2>
                </div>
                <button class="modal-close" onclick="closeTaskModal()">
                    <i data-lucide="x"></i>
                </button>
            </div>
            
            <form id="taskForm" onsubmit="submitTask(event)" class="modern-form">
                <div class="form-group">
                    <label class="form-label">
                        <i data-lucide="user" class="label-icon"></i>
                        –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
                    </label>
                    <div class="custom-select-wrapper">
                        <select id="taskEmployee" name="employee" required class="custom-select">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</option>
                        </select>
                        <div class="select-arrow">
                            <i data-lucide="chevron-down"></i>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i data-lucide="edit-3" class="label-icon"></i>
                        –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
                    </label>
                    <input type="text" name="title" required placeholder="–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É" class="form-input">
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i data-lucide="file-text" class="label-icon"></i>
                        –û–ø–∏—Å–∞–Ω–∏–µ <span class="optional-label">(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</span>
                    </label>
                    <textarea name="description" rows="4" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, —Å—Å—ã–ª–∫–∏..." class="form-textarea"></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group half-width">
                        <label class="form-label">
                            <i data-lucide="calendar" class="label-icon"></i>
                            –°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
                        </label>
                        <input type="date" id="taskDeadline" name="deadline" required class="form-input">
                    </div>
                    
                    <div class="form-group half-width">
                        <label class="form-label">
                            <i data-lucide="flag" class="label-icon"></i>
                            –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
                        </label>
                        <div class="custom-select-wrapper">
                            <select name="priority" class="custom-select">
                                <option value="–ù–∏–∑–∫–∏–π">üü¢ –ù–∏–∑–∫–∏–π</option>
                                <option value="–°—Ä–µ–¥–Ω–∏–π" selected>üü° –°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="–í—ã—Å–æ–∫–∏–π">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                            </select>
                            <div class="select-arrow">
                                <i data-lucide="chevron-down"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" onclick="closeTaskModal()" class="btn-secondary">
                        <i data-lucide="x"></i>
                        –û—Ç–º–µ–Ω–∞
                    </button>
                    <button type="submit" class="submit-btn">
                        <i data-lucide="plus" class="btn-icon"></i>
                        –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <div id="editTaskModal" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 2000;">
        <div style="background: var(--bg-card); border-radius: 20px; padding: 28px; width: 90%; max-width: 400px; max-height: 90vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2 style="margin: 0;">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É</h2>
                <button onclick="closeEditTaskModal()" style="background: none; border: none; color: var(--text-secondary); font-size: 24px; cursor: pointer;">‚úï</button>
            </div>
            
            <form id="editTaskForm" onsubmit="submitEditTask(event)">
                <input type="hidden" id="editTaskId" name="taskId">
                
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
                    <input type="text" id="editTaskTitle" name="title" required placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏">
                </div>
                
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="editTaskDescription" name="description" rows="3" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                </div>
                
                <div class="form-group">
                    <label>–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                    <input type="date" id="editTaskDeadline" name="deadline" required>
                </div>
                
                <div class="form-group">
                    <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                    <div class="custom-select-wrapper">
                        <select id="editTaskPriority" name="priority" class="custom-select">
                            <option value="–ù–∏–∑–∫–∏–π">üü¢ –ù–∏–∑–∫–∏–π</option>
                            <option value="–°—Ä–µ–¥–Ω–∏–π">üü° –°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="–í—ã—Å–æ–∫–∏–π">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                        </select>
                        <div class="select-arrow">
                            <i data-lucide="chevron-down"></i>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</label>
                    <div class="custom-select-wrapper">
                        <select id="editTaskEmployee" name="employee" required class="custom-select">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</option>
                        </select>
                        <div class="select-arrow">
                            <i data-lucide="chevron-down"></i>
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="submit-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </form>
        </div>
    </div>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script src="custom-select.js"></script>
    <script src="app.js"></script>
    <script src="fix-all.js"></script>

    <!-- Core Fixes Only -->
    <script src="telegram-fix.js"></script>
    <script src="employees-fix.js"></script>
    <script src="admin-data-fix.js"></script>
    <script src="calendar-fix.js"></script>

    <!-- –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê - –î–û–õ–ñ–ù–û –ë–´–¢–¨ –ü–û–°–õ–ï–î–ù–ò–ú -->
    <script src="modal-fix.js"></script>
    <script src="employee-dropdown.js"></script>
    <script src="select-fix.js"></script>
    <script src="dropdown-debug.js"></script>

    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Lucide –∏–∫–æ–Ω–æ–∫ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Lucide –∏–∫–æ–Ω–∫–∏
            lucide.createIcons();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
            updateDateTime();
            setInterval(updateDateTime, 1000);
        });
        
        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏
        function updateDateTime() {
            const now = new Date();
            const timeElement = document.getElementById('currentTime');
            const dateElement = document.getElementById('currentDate');
            
            if (timeElement) {
                timeElement.textContent = now.toLocaleTimeString('ru-RU', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
            
            if (dateElement) {
                dateElement.textContent = now.toLocaleDateString('ru-RU', {
                    weekday: 'long',
                    day: 'numeric',
                    month: 'long'
                });
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è FAB –º–µ–Ω—é
        function toggleFab() {
            const fabMain = document.getElementById('fabMain');
            const fabMenu = document.getElementById('fabMenu');
            
            if (fabMenu.classList.contains('active')) {
                fabMain.classList.remove('active');
                fabMenu.classList.remove('active');
            } else {
                fabMain.classList.add('active');
                fabMenu.classList.add('active');
            }
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ FAB –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        document.addEventListener('click', function(event) {
            const floatingActions = document.querySelector('.floating-actions');
            if (!floatingActions.contains(event.target)) {
                document.getElementById('fabMain').classList.remove('active');
                document.getElementById('fabMenu').classList.remove('active');
            }
        });
    </script>
    
</body>
</html>
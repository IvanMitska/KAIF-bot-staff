<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover, maximum-scale=1.0">
    <title>KAIF App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navigation">
        <button class="nav-btn active" onclick="showPage('home')">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </button>
        <button class="nav-btn" onclick="showPage('report')">
            <span class="nav-icon">üìù</span>
            <span class="nav-label">–û—Ç—á–µ—Ç—ã</span>
        </button>
        <button class="nav-btn" onclick="showPage('tasks')">
            <span class="nav-icon">‚úÖ</span>
            <span class="nav-label">–ó–∞–¥–∞—á–∏</span>
        </button>
        <button class="nav-btn" onclick="showPage('stats')">
            <span class="nav-icon">üìä</span>
            <span class="nav-label">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
        </button>
        <button class="nav-btn" onclick="showPage('profile')">
            <span class="nav-icon">üë§</span>
            <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </button>
    </nav>
    
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div id="home" class="page active">
            <div class="header">
                <h1>–ü—Ä–∏–≤–µ—Ç, <span id="userName">Ivan</span>! üëã</h1>
                <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ KAIF Staff</p>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ —É—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ -->
            <div class="attendance-section">
                <h2 class="attendance-title">–£—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</h2>
                <div class="attendance-buttons">
                    <button id="checkInBtn" onclick="checkIn()" class="attendance-btn check-in">
                        <div class="btn-icon-wrapper">
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="btn-text">
                            <span class="btn-label">–ü—Ä–∏—à–µ–ª –Ω–∞ —Ä–∞–±–æ—Ç—É</span>
                            <span id="checkInTime" class="btn-time"></span>
                        </div>
                    </button>
                    <button id="checkOutBtn" onclick="checkOut()" class="attendance-btn check-out">
                        <div class="btn-icon-wrapper">
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="btn-text">
                            <span class="btn-label">–£—à–µ–ª —Å —Ä–∞–±–æ—Ç—ã</span>
                            <span id="checkOutTime" class="btn-time"></span>
                        </div>
                    </button>
                </div>
            </div>
            
            <div class="action-cards">
                <div class="action-card" onclick="showPage('report')">
                    <div class="action-icon">üìù</div>
                    <div class="action-content">
                        <h3>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç</h3>
                        <p>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–∞–±–æ—Ç–µ</p>
                    </div>
                </div>
                
                <div class="action-card" onclick="showPage('tasks')">
                    <div class="action-icon">‚úÖ</div>
                    <div class="action-content">
                        <h3>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h3>
                        <p><span id="activeTasksCount">0</span> –∞–∫—Ç–∏–≤–Ω—ã—Ö</p>
                    </div>
                </div>
            </div>
            
            <div class="status-section">
                <h2 style="font-size: 18px; margin-bottom: 16px; color: var(--text-secondary);">–°—Ç–∞—Ç—É—Å –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h2>
                <div class="status-card">
                    <div id="reportStatusItem" class="status-item status-warning">
                        <span class="status-icon">‚ö†Ô∏è</span>
                        <span class="status-text">–û—Ç—á–µ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω</span>
                    </div>
                    <div id="attendanceStatusItem" class="status-item">
                        <span class="status-icon">‚è∞</span>
                        <span class="status-text">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç—á–µ—Ç–æ–≤ -->
        <div id="report" class="page">
            <button class="back-btn" onclick="showPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header">
                <h1>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç</h1>
                <p id="reportDate">2 –∞–≤–≥—É—Å—Ç–∞ 2025</p>
            </div>
            
            <form id="reportForm">
                <div class="form-group">
                    <label>‚úçÔ∏è –ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏ —Å–µ–≥–æ–¥–Ω—è?</label>
                    <textarea name="whatDone" required placeholder="–û–ø–∏—à–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É..."></textarea>
                </div>
                
                <div class="form-group">
                    <label>‚ö†Ô∏è –ö–∞–∫–∏–µ –±—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã?</label>
                    <textarea name="problems" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ '–Ω–µ—Ç'..."></textarea>
                </div>
                
                <button type="submit" class="submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç</button>
            </form>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–¥–∞—á -->
        <div id="tasks" class="page">
            <button class="back-btn" onclick="showPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h1 style="margin: 0;">–ú–æ–∏ –∑–∞–¥–∞—á–∏</h1>
                <button id="createTaskBtn" onclick="showCreateTaskModal()" style="display: none; background: var(--gradient-primary); border: none; color: white; padding: 10px 20px; border-radius: 20px; font-size: 14px; font-weight: 600; cursor: pointer;">
                    ‚ûï –°–æ–∑–¥–∞—Ç—å
                </button>
            </div>
            
            <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–∏–ø–∞ –∑–∞–¥–∞—á -->
            <div class="task-type-switcher" style="display: flex; background: var(--bg-secondary); border-radius: 12px; padding: 4px; margin-bottom: 20px;">
                <button id="myTasksBtn" class="task-type-btn active" onclick="switchTaskType('my')" style="flex: 1; padding: 10px; background: var(--bg-card); border: none; border-radius: 8px; color: var(--text-primary); cursor: pointer; transition: all 0.3s;">
                    üì• –ú–æ–∏ –∑–∞–¥–∞—á–∏
                </button>
                <button id="createdTasksBtn" class="task-type-btn" onclick="switchTaskType('created')" style="flex: 1; padding: 10px; background: transparent; border: none; border-radius: 8px; color: var(--text-secondary); cursor: pointer; transition: all 0.3s; display: none;">
                    üì§ –ü–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ
                </button>
            </div>
            
            <div class="task-filters">
                <button class="filter-btn active" onclick="filterTasks('all')">
                    –í—Å–µ <span class="count">0</span>
                </button>
                <button class="filter-btn" onclick="filterTasks('new')">
                    üî¥ –ù–æ–≤—ã–µ <span class="count">0</span>
                </button>
                <button class="filter-btn" onclick="filterTasks('in-progress')">
                    üü° –í —Ä–∞–±–æ—Ç–µ <span class="count">0</span>
                </button>
                <button class="filter-btn" onclick="filterTasks('completed')">
                    üü¢ –í—ã–ø–æ–ª–Ω–µ–Ω—ã <span class="count">0</span>
                </button>
            </div>
            
            <div id="tasksList">
                <div class="loading">
                    <div class="spinner"></div>
                    <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á...</p>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <div id="stats" class="page">
            <button class="back-btn" onclick="showPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header">
                <h1>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìÖ</div>
                    <div class="stat-value" id="totalReports">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –æ—Ç—á–µ—Ç–æ–≤</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-value" id="completedTasks">0</div>
                    <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">üî•</div>
                    <div class="stat-value" id="currentStreak">0</div>
                    <div class="stat-label">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-value" id="completionRate">0%</div>
                    <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="profile" class="page">
            <button class="back-btn" onclick="showPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header">
                <h1>–ü—Ä–æ—Ñ–∏–ª—å</h1>
            </div>
            
            <div class="profile-content">
                <div class="action-card">
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 64px; margin-bottom: 16px;">üë§</div>
                        <h2 id="profileName" style="margin-bottom: 8px;">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                        <p id="profilePosition" style="color: var(--text-secondary); margin-bottom: 16px;">...</p>
                        <p style="color: var(--text-muted); font-size: 14px;">ID: <span id="profileId">...</span></p>
                    </div>
                </div>
                
                <div style="margin-top: 24px;">
                    <div class="action-card" onclick="showHelp()">
                        <div class="action-icon">‚ùì</div>
                        <div class="action-content">
                            <h3>–ü–æ–º–æ—â—å</h3>
                            <p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞</p>
                        </div>
                    </div>
                    
                    <div id="managerSection" style="display: none;">
                        <div class="action-card" onclick="showEmployees()">
                            <div class="action-icon">üë•</div>
                            <div class="action-content">
                                <h3>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h3>
                                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π</p>
                            </div>
                        </div>
                        
                        <div class="action-card" onclick="showAdminPanel()">
                            <div class="action-icon">üìä</div>
                            <div class="action-content">
                                <h3>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>
                                <p>–û—Ç—á–µ—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤) -->
        <div id="employees" class="page">
            <button class="back-btn" onclick="showPage('profile')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header">
                <h1>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h1>
                <p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</p>
            </div>
            
            <div id="employeesList">
                <div class="loading">
                    <div class="spinner"></div>
                    <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–¥–∞—á–∏ -->
        <div id="taskDetail" class="page">
            <button class="back-btn" onclick="showPage('tasks')">‚Üê –ö –∑–∞–¥–∞—á–∞–º</button>
            
            <div class="task-detail-content">
                <div class="loading">
                    <div class="spinner"></div>
                    <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á–∏...</p>
                </div>
            </div>
        </div>
        
        <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤) -->
        <div id="adminPanel" class="page">
            <button class="back-btn" onclick="showPage('profile')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header">
                <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π</p>
            </div>
            
            <!-- –í–∫–ª–∞–¥–∫–∏ -->
            <div style="display: flex; background: var(--bg-secondary); border-radius: 12px; padding: 4px; margin-bottom: 24px;">
                <button id="dashboardTab" class="admin-tab active" onclick="switchAdminTab('dashboard')">
                    üìä Dashboard
                </button>
                <button id="reportsTab" class="admin-tab" onclick="switchAdminTab('reports')">
                    üìù –û—Ç—á–µ—Ç—ã
                </button>
                <button id="attendanceTab" class="admin-tab" onclick="switchAdminTab('attendance')">
                    ‚è∞ –£—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏
                </button>
            </div>
            
            <!-- Dashboard –≤–∫–ª–∞–¥–∫–∞ -->
            <div id="dashboardContent" class="admin-tab-content active">
                <!-- –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ -->
                <div class="stats-grid" style="margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-value" id="dashboardTodayReports">0</div>
                        <div class="stat-label">–û—Ç—á–µ—Ç–æ–≤ —Å–µ–≥–æ–¥–Ω—è</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚ö†Ô∏è</div>
                        <div class="stat-value" id="dashboardMissingReports">0</div>
                        <div class="stat-label">–ë–µ–∑ –æ—Ç—á–µ—Ç–æ–≤</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üìã</div>
                        <div class="stat-value" id="dashboardActiveTasks">0</div>
                        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-value" id="dashboardCompletedToday">0</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è</div>
                    </div>
                </div>
                
                <!-- –ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞ –Ω–µ–¥–µ–ª—é -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px; margin-bottom: 24px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px;">üìä –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –Ω–µ–¥–µ–ª—é</h3>
                    <div id="activityChart" style="height: 200px;">
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <!-- –¢–æ–ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
                    <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px;">
                        <h3 style="margin-bottom: 16px; font-size: 18px;">üèÜ –¢–æ–ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
                        <div id="topEmployees">
                            <div class="loading">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á -->
                    <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px;">
                        <h3 style="margin-bottom: 16px; font-size: 18px;">üìã –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á</h3>
                        <div id="tasksStatus">
                            <div class="loading">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –£—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px; margin-top: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px;">‚è∞ –ü—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
                    <div id="attendanceStatus">
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <!-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±–µ–∑ –æ—Ç—á–µ—Ç–æ–≤ -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px; margin-top: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px; color: var(--warning);">‚ö†Ô∏è –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±–µ–∑ –æ—Ç—á–µ—Ç–æ–≤ —Å–µ–≥–æ–¥–Ω—è</h3>
                    <div id="missingReportsList">
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –û—Ç—á–µ—Ç—ã –≤–∫–ª–∞–¥–∫–∞ -->
            <div id="reportsContent" class="admin-tab-content" style="display: none;">
                <!-- –§–∏–ª—å—Ç—Ä—ã -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 16px; margin-bottom: 24px;">
                    <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–ü–µ—Ä–∏–æ–¥</label>
                            <select id="periodFilter" onchange="updateAdminPanel()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                                <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                                <option value="week">–≠—Ç–∞ –Ω–µ–¥–µ–ª—è</option>
                                <option value="month">–≠—Ç–æ—Ç –º–µ—Å—è—Ü</option>
                                <option value="custom">–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—ã</option>
                            </select>
                        </div>
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</label>
                            <select id="employeeFilter" onchange="updateAdminPanel()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                                <option value="all">–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="customDateRange" style="display: none; gap: 12px;">
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–°</label>
                            <input type="date" id="startDate" onchange="updateAdminPanel()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                        </div>
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–ü–æ</label>
                            <input type="date" id="endDate" onchange="updateAdminPanel()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                        </div>
                    </div>
                </div>
                
                <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="stats-grid" style="margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-icon">üìù</div>
                        <div class="stat-value" id="adminTotalReports">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –æ—Ç—á–µ—Ç–æ–≤</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-value" id="adminActiveEmployees">0</div>
                        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-value" id="adminCompletedTasks">0</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-value" id="adminTodayReports">0</div>
                        <div class="stat-label">–û—Ç—á–µ—Ç–æ–≤ —Å–µ–≥–æ–¥–Ω—è</div>
                    </div>
                </div>
                
                <!-- –°–ø–∏—Å–æ–∫ –æ—Ç—á–µ—Ç–æ–≤ -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px;">–û—Ç—á–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
                    <div id="adminReportsList">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–æ–≤...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –£—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –≤–∫–ª–∞–¥–∫–∞ -->
            <div id="attendanceContent" class="admin-tab-content" style="display: none;">
                <!-- –§–∏–ª—å—Ç—Ä—ã -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 16px; margin-bottom: 24px;">
                    <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–ü–µ—Ä–∏–æ–¥</label>
                            <select id="attendancePeriodFilter" onchange="updateAttendanceHistory()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                                <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                                <option value="week" selected>–≠—Ç–∞ –Ω–µ–¥–µ–ª—è</option>
                                <option value="month">–≠—Ç–æ—Ç –º–µ—Å—è—Ü</option>
                                <option value="custom">–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—ã</option>
                            </select>
                        </div>
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</label>
                            <select id="attendanceEmployeeFilter" onchange="updateAttendanceHistory()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                                <option value="all">–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="attendanceCustomDateRange" style="display: none; gap: 12px;">
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–°</label>
                            <input type="date" id="attendanceStartDate" onchange="updateAttendanceHistory()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                        </div>
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–ü–æ</label>
                            <input type="date" id="attendanceEndDate" onchange="updateAttendanceHistory()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                        </div>
                    </div>
                </div>
                
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="stats-grid" style="margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-value" id="attendanceTotalDays">0</div>
                        <div class="stat-label">–†–∞–±–æ—á–∏—Ö –¥–Ω–µ–π</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚è∞</div>
                        <div class="stat-value" id="attendanceTotalHours">0</div>
                        <div class="stat-label">–ß–∞—Å–æ–≤ –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚ö†Ô∏è</div>
                        <div class="stat-value" id="attendanceLateCount">0</div>
                        <div class="stat-label">–û–ø–æ–∑–¥–∞–Ω–∏–π</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-value" id="attendanceAvgHours">0</div>
                        <div class="stat-label">–ß–∞—Å–æ–≤ –≤ –¥–µ–Ω—å</div>
                    </div>
                </div>
                
                <!-- –ò—Å—Ç–æ—Ä–∏—è —É—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px;">–ò—Å—Ç–æ—Ä–∏—è —É—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏</h3>
                    <div id="attendanceHistoryList">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <div id="taskModal" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 2000;">
        <div style="background: var(--bg-card); border-radius: 20px; padding: 28px; width: 90%; max-width: 400px; max-height: 90vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2 style="margin: 0;">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h2>
                <button onclick="closeTaskModal()" style="background: none; border: none; color: var(--text-secondary); font-size: 24px; cursor: pointer;">‚úï</button>
            </div>
            
            <form id="taskForm" onsubmit="submitTask(event)">
                <div class="form-group">
                    <label>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</label>
                    <select id="taskEmployee" name="employee" required style="background: var(--bg-secondary);">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
                    <input type="text" name="title" required placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏">
                </div>
                
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                    <textarea name="description" rows="3" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                </div>
                
                <div class="form-group">
                    <label>–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                    <input type="date" id="taskDeadline" name="deadline" required>
                </div>
                
                <div class="form-group">
                    <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                    <select name="priority" style="background: var(--bg-secondary);">
                        <option value="low">üü¢ –ù–∏–∑–∫–∏–π</option>
                        <option value="medium" selected>üü° –°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="high">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                    </select>
                </div>
                
                <button type="submit" class="submit-btn">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
            </form>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <div id="editTaskModal" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 2000;">
        <div style="background: var(--bg-card); border-radius: 20px; padding: 28px; width: 90%; max-width: 400px; max-height: 90vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2 style="margin: 0;">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É</h2>
                <button onclick="closeEditTaskModal()" style="background: none; border: none; color: var(--text-secondary); font-size: 24px; cursor: pointer;">‚úï</button>
            </div>
            
            <form id="editTaskForm" onsubmit="submitEditTask(event)">
                <input type="hidden" id="editTaskId" name="taskId">
                
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
                    <input type="text" id="editTaskTitle" name="title" required placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏">
                </div>
                
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="editTaskDescription" name="description" rows="3" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                </div>
                
                <div class="form-group">
                    <label>–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                    <input type="date" id="editTaskDeadline" name="deadline" required>
                </div>
                
                <div class="form-group">
                    <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                    <select id="editTaskPriority" name="priority" style="background: var(--bg-secondary);">
                        <option value="low">üü¢ –ù–∏–∑–∫–∏–π</option>
                        <option value="medium">üü° –°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="high">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</label>
                    <select id="editTaskEmployee" name="employee" required style="background: var(--bg-secondary);">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</option>
                    </select>
                </div>
                
                <button type="submit" class="submit-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </form>
        </div>
    </div>
    
    <script src="app.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover, maximum-scale=1.0">
    <title>KAIF Staff App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <!-- –§–æ–Ω–æ–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è -->
    <div class="background-animation"></div>
    
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navigation">
        <div class="nav-indicator"></div>
        <button class="nav-btn active" onclick="showPage('home')" data-page="home">
            <div class="nav-icon-wrapper">
                <i data-lucide="home"></i>
            </div>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </button>
        <button class="nav-btn" onclick="showPage('report')" data-page="report">
            <div class="nav-icon-wrapper">
                <i data-lucide="file-text"></i>
            </div>
            <span class="nav-label">–û—Ç—á–µ—Ç—ã</span>
        </button>
        <button class="nav-btn" onclick="showPage('tasks')" data-page="tasks">
            <div class="nav-icon-wrapper">
                <i data-lucide="check-square"></i>
                <span class="nav-badge" id="tasksBadge" style="display: none;"></span>
            </div>
            <span class="nav-label">–ó–∞–¥–∞—á–∏</span>
        </button>
        <button class="nav-btn" onclick="showPage('stats')" data-page="stats">
            <div class="nav-icon-wrapper">
                <i data-lucide="bar-chart-3"></i>
            </div>
            <span class="nav-label">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
        </button>
        <button class="nav-btn" onclick="showPage('profile')" data-page="profile">
            <div class="nav-icon-wrapper">
                <i data-lucide="user"></i>
            </div>
            <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </button>
    </nav>
    
    <!-- –ü–ª–∞–≤–∞—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="floating-actions">
        <button class="fab-main" id="fabMain" onclick="toggleFab()">
            <i data-lucide="plus"></i>
        </button>
        <div class="fab-menu" id="fabMenu">
            <button class="fab-item" onclick="showPage('report'); toggleFab()">
                <i data-lucide="file-text"></i>
                <span>–û—Ç—á–µ—Ç</span>
            </button>
            <button class="fab-item" onclick="showCreateTaskModal(); toggleFab()">
                <i data-lucide="plus-circle"></i>
                <span>–ó–∞–¥–∞—á–∞</span>
            </button>
        </div>
    </div>
    
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div id="home" class="page active">
            <div class="page-header">
                <div class="welcome-section">
                    <div class="greeting-wrapper">
                        <h1 class="greeting-text">
                            –ü—Ä–∏–≤–µ—Ç, <span id="userName" class="user-name">Ivan</span>! 
                            <span class="greeting-emoji">üëã</span>
                        </h1>
                        <p class="welcome-subtitle">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ KAIF Staff</p>
                    </div>
                    <div class="date-time-widget">
                        <div class="current-time" id="currentTime"></div>
                        <div class="current-date" id="currentDate"></div>
                    </div>
                </div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ —É—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ -->
            <div class="attendance-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i data-lucide="clock" class="section-icon"></i>
                        –£—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
                    </h2>
                </div>
                <div class="attendance-buttons">
                    <button id="checkInBtn" onclick="checkIn()" class="attendance-btn check-in modern">
                        <div class="btn-icon-wrapper">
                            <i data-lucide="log-in" class="btn-icon"></i>
                        </div>
                        <div class="btn-text">
                            <span class="btn-label">–ü—Ä–∏—à–µ–ª –Ω–∞ —Ä–∞–±–æ—Ç—É</span>
                            <span id="checkInTime" class="btn-time"></span>
                        </div>
                        <div class="btn-ripple"></div>
                    </button>
                    <button id="checkOutBtn" onclick="checkOut()" class="attendance-btn check-out modern">
                        <div class="btn-icon-wrapper">
                            <i data-lucide="log-out" class="btn-icon"></i>
                        </div>
                        <div class="btn-text">
                            <span class="btn-label">–£—à–µ–ª —Å —Ä–∞–±–æ—Ç—ã</span>
                            <span id="checkOutTime" class="btn-time"></span>
                        </div>
                        <div class="btn-ripple"></div>
                    </button>
                </div>
            </div>
            
            <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
            <div class="quick-actions">
                <div class="section-header">
                    <h2 class="section-title">
                        <i data-lucide="zap" class="section-icon"></i>
                        –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
                    </h2>
                </div>
                <div class="action-grid">
                    <div class="action-card modern" onclick="showPage('report')">
                        <div class="action-icon-wrapper">
                            <i data-lucide="file-text" class="action-icon"></i>
                        </div>
                        <div class="action-content">
                            <h3>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç</h3>
                            <p>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–∞–±–æ—Ç–µ</p>
                        </div>
                        <div class="action-arrow">
                            <i data-lucide="chevron-right"></i>
                        </div>
                    </div>
                    
                    <div class="action-card modern" onclick="showPage('tasks')">
                        <div class="action-icon-wrapper">
                            <i data-lucide="check-square" class="action-icon"></i>
                        </div>
                        <div class="action-content">
                            <h3>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h3>
                            <p><span id="activeTasksCount">0</span> –∞–∫—Ç–∏–≤–Ω—ã—Ö</p>
                        </div>
                        <div class="action-arrow">
                            <i data-lucide="chevron-right"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –°—Ç–∞—Ç—É—Å –¥–Ω—è -->
            <div class="daily-status">
                <div class="section-header">
                    <h2 class="section-title">
                        <i data-lucide="calendar" class="section-icon"></i>
                        –°—Ç–∞—Ç—É—Å –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
                    </h2>
                </div>
                <div class="status-grid">
                    <div id="reportStatusItem" class="status-item warning">
                        <div class="status-icon-wrapper">
                            <i data-lucide="alert-circle"></i>
                        </div>
                        <div class="status-content">
                            <span class="status-text">–û—Ç—á–µ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω</span>
                        </div>
                    </div>
                    <div id="attendanceStatusItem" class="status-item loading">
                        <div class="status-icon-wrapper">
                            <i data-lucide="clock"></i>
                        </div>
                        <div class="status-content">
                            <span class="status-text">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç—á–µ—Ç–æ–≤ -->
        <div id="report" class="page">
            <div class="page-header">
                <button class="back-btn modern" onclick="showPage('home')">
                    <i data-lucide="arrow-left"></i>
                    <span>–ù–∞–∑–∞–¥</span>
                </button>
                
                <div class="page-title-section">
                    <h1 class="page-title">
                        <i data-lucide="file-text" class="title-icon"></i>
                        –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç
                    </h1>
                    <p id="reportDate" class="page-subtitle">2 –∞–≤–≥—É—Å—Ç–∞ 2025</p>
                </div>
            </div>
            
            <form id="reportForm" class="modern-form">
                <div class="form-card">
                    <div class="form-group modern">
                        <label class="form-label">
                            <i data-lucide="edit-3" class="label-icon"></i>
                            –ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏ —Å–µ–≥–æ–¥–Ω—è?
                        </label>
                        <textarea name="whatDone" required placeholder="–û–ø–∏—à–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É..." class="form-textarea modern"></textarea>
                    </div>
                    
                    <div class="form-group modern">
                        <label class="form-label">
                            <i data-lucide="alert-triangle" class="label-icon"></i>
                            –ö–∞–∫–∏–µ –±—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã?
                        </label>
                        <textarea name="problems" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ '–Ω–µ—Ç'..." class="form-textarea modern"></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn modern">
                        <span class="btn-text">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç</span>
                        <i data-lucide="send" class="btn-icon"></i>
                        <div class="btn-ripple"></div>
                    </button>
                </div>
            </form>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–¥–∞—á -->
        <div id="tasks" class="page">
            <div class="page-header">
                <button class="back-btn modern" onclick="showPage('home')">
                    <i data-lucide="arrow-left"></i>
                    <span>–ù–∞–∑–∞–¥</span>
                </button>
                
                <div class="page-title-section">
                    <h1 class="page-title">
                        <i data-lucide="check-square" class="title-icon"></i>
                        –ú–æ–∏ –∑–∞–¥–∞—á–∏
                    </h1>
                    <button id="createTaskBtn" class="create-task-btn" onclick="showCreateTaskModal()" style="display: none;">
                        <i data-lucide="plus"></i>
                        <span>–°–æ–∑–¥–∞—Ç—å</span>
                    </button>
                </div>
            </div>
            
            <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–∏–ø–∞ –∑–∞–¥–∞—á -->
            <div class="task-type-switcher modern">
                <button id="myTasksBtn" class="task-type-btn active" onclick="switchTaskType('my')">
                    <i data-lucide="inbox" class="btn-icon"></i>
                    <span>–ú–æ–∏ –∑–∞–¥–∞—á–∏</span>
                </button>
                <button id="createdTasksBtn" class="task-type-btn" onclick="switchTaskType('created')" style="display: none;">
                    <i data-lucide="send" class="btn-icon"></i>
                    <span>–ü–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ</span>
                </button>
            </div>
            
            <!-- –§–∏–ª—å—Ç—Ä—ã –∑–∞–¥–∞—á -->
            <div class="task-filters modern">
                <button class="filter-btn active" onclick="filterTasks('all')">
                    <span class="filter-text">–í—Å–µ</span>
                    <span class="count">0</span>
                </button>
                <button class="filter-btn" onclick="filterTasks('new')">
                    <div class="filter-indicator new"></div>
                    <span class="filter-text">–ù–æ–≤—ã–µ</span>
                    <span class="count">0</span>
                </button>
                <button class="filter-btn" onclick="filterTasks('in-progress')">
                    <div class="filter-indicator in-progress"></div>
                    <span class="filter-text">–í —Ä–∞–±–æ—Ç–µ</span>
                    <span class="count">0</span>
                </button>
                <button class="filter-btn" onclick="filterTasks('completed')">
                    <div class="filter-indicator completed"></div>
                    <span class="filter-text">–í—ã–ø–æ–ª–Ω–µ–Ω—ã</span>
                    <span class="count">0</span>
                </button>
            </div>
            
            <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
            <div id="tasksList" class="tasks-container">
                <div class="loading modern">
                    <div class="loading-spinner"></div>
                    <p class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á...</p>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <div id="stats" class="page">
            <div class="page-header">
                <button class="back-btn modern" onclick="showPage('home')">
                    <i data-lucide="arrow-left"></i>
                    <span>–ù–∞–∑–∞–¥</span>
                </button>
                
                <div class="page-title-section">
                    <h1 class="page-title">
                        <i data-lucide="bar-chart-3" class="title-icon"></i>
                        –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                    </h1>
                </div>
            </div>
            
            <div class="stats-overview">
                <div class="stats-grid modern">
                    <div class="stat-card modern">
                        <div class="stat-header">
                            <i data-lucide="calendar" class="stat-icon"></i>
                            <div class="stat-trend positive">
                                <i data-lucide="trending-up"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="totalReports">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –æ—Ç—á–µ—Ç–æ–≤</div>
                    </div>
                    
                    <div class="stat-card modern">
                        <div class="stat-header">
                            <i data-lucide="check-circle" class="stat-icon"></i>
                            <div class="stat-trend positive">
                                <i data-lucide="trending-up"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="completedTasks">0</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á</div>
                    </div>
                    
                    <div class="stat-card modern">
                        <div class="stat-header">
                            <i data-lucide="flame" class="stat-icon"></i>
                            <div class="stat-trend neutral">
                                <i data-lucide="minus"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="currentStreak">0</div>
                        <div class="stat-label">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                    </div>
                    
                    <div class="stat-card modern">
                        <div class="stat-header">
                            <i data-lucide="activity" class="stat-icon"></i>
                            <div class="stat-trend positive">
                                <i data-lucide="trending-up"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="completionRate">0%</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="profile" class="page">
            <div class="page-header">
                <button class="back-btn modern" onclick="showPage('home')">
                    <i data-lucide="arrow-left"></i>
                    <span>–ù–∞–∑–∞–¥</span>
                </button>
                
                <div class="page-title-section">
                    <h1 class="page-title">
                        <i data-lucide="user" class="title-icon"></i>
                        –ü—Ä–æ—Ñ–∏–ª—å
                    </h1>
                </div>
            </div>
            
            <div class="profile-content">
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
                <div class="profile-card modern">
                    <div class="profile-avatar">
                        <i data-lucide="user" class="avatar-icon"></i>
                    </div>
                    <div class="profile-info">
                        <h2 id="profileName" class="profile-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                        <p id="profilePosition" class="profile-position">...</p>
                        <div class="profile-id">
                            <i data-lucide="hash" class="id-icon"></i>
                            <span id="profileId">...</span>
                        </div>
                    </div>
                </div>
                
                <!-- –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
                <div class="profile-actions">
                    <div class="action-card modern" onclick="showHelp()">
                        <div class="action-icon-wrapper">
                            <i data-lucide="help-circle" class="action-icon"></i>
                        </div>
                        <div class="action-content">
                            <h3>–ü–æ–º–æ—â—å</h3>
                            <p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞</p>
                        </div>
                        <div class="action-arrow">
                            <i data-lucide="chevron-right"></i>
                        </div>
                    </div>
                    
                    <div id="managerSection" class="manager-section" style="display: none;">
                        <div class="action-card modern" onclick="showEmployees()">
                            <div class="action-icon-wrapper">
                                <i data-lucide="users" class="action-icon"></i>
                            </div>
                            <div class="action-content">
                                <h3>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h3>
                                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π</p>
                            </div>
                            <div class="action-arrow">
                                <i data-lucide="chevron-right"></i>
                            </div>
                        </div>
                        
                        <div class="action-card modern" onclick="showAdminPanel()">
                            <div class="action-icon-wrapper">
                                <i data-lucide="settings" class="action-icon"></i>
                            </div>
                            <div class="action-content">
                                <h3>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>
                                <p>–û—Ç—á–µ—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</p>
                            </div>
                            <div class="action-arrow">
                                <i data-lucide="chevron-right"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤) -->
        <div id="employees" class="page">
            <button class="back-btn" onclick="showPage('profile')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header">
                <h1>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h1>
                <p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</p>
            </div>
            
            <div id="employeesList">
                <div class="loading">
                    <div class="spinner"></div>
                    <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–¥–∞—á–∏ -->
        <div id="taskDetail" class="page">
            <button class="back-btn" onclick="showPage('tasks')">‚Üê –ö –∑–∞–¥–∞—á–∞–º</button>
            
            <div class="task-detail-content">
                <div class="loading">
                    <div class="spinner"></div>
                    <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á–∏...</p>
                </div>
            </div>
        </div>
        
        <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤) -->
        <div id="adminPanel" class="page">
            <button class="back-btn" onclick="showPage('profile')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header">
                <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π</p>
            </div>
            
            <!-- –í–∫–ª–∞–¥–∫–∏ -->
            <div style="display: flex; background: var(--bg-secondary); border-radius: 12px; padding: 4px; margin-bottom: 24px;">
                <button id="dashboardTab" class="admin-tab active" onclick="switchAdminTab('dashboard')">
                    üìä Dashboard
                </button>
                <button id="reportsTab" class="admin-tab" onclick="switchAdminTab('reports')">
                    üìù –û—Ç—á–µ—Ç—ã
                </button>
                <button id="attendanceTab" class="admin-tab" onclick="switchAdminTab('attendance')">
                    ‚è∞ –£—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏
                </button>
            </div>
            
            <!-- Dashboard –≤–∫–ª–∞–¥–∫–∞ -->
            <div id="dashboardContent" class="admin-tab-content" style="display: block;">
                <!-- –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ -->
                <div class="stats-grid" style="margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-value" id="dashboardTodayReports">0</div>
                        <div class="stat-label">–û—Ç—á–µ—Ç–æ–≤ —Å–µ–≥–æ–¥–Ω—è</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚ö†Ô∏è</div>
                        <div class="stat-value" id="dashboardMissingReports">0</div>
                        <div class="stat-label">–ë–µ–∑ –æ—Ç—á–µ—Ç–æ–≤</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üìã</div>
                        <div class="stat-value" id="dashboardActiveTasks">0</div>
                        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-value" id="dashboardCompletedToday">0</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è</div>
                    </div>
                </div>
                
                <!-- –ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞ –Ω–µ–¥–µ–ª—é -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px; margin-bottom: 24px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px;">üìä –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –Ω–µ–¥–µ–ª—é</h3>
                    <div id="activityChart" style="height: 200px;">
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <!-- –¢–æ–ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
                    <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px;">
                        <h3 style="margin-bottom: 16px; font-size: 18px;">üèÜ –¢–æ–ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
                        <div id="topEmployees">
                            <div class="loading">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á -->
                    <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px;">
                        <h3 style="margin-bottom: 16px; font-size: 18px;">üìã –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á</h3>
                        <div id="tasksStatus">
                            <div class="loading">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –£—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px; margin-top: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px;">‚è∞ –ü—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
                    <div id="attendanceStatus">
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <!-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±–µ–∑ –æ—Ç—á–µ—Ç–æ–≤ -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px; margin-top: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px; color: var(--warning);">‚ö†Ô∏è –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±–µ–∑ –æ—Ç—á–µ—Ç–æ–≤ —Å–µ–≥–æ–¥–Ω—è</h3>
                    <div id="missingReportsList">
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <!-- –û—Ç—á–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∑–∞ —Å–µ–≥–æ–¥–Ω—è -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px; margin-top: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px;">üìù –û—Ç—á–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∑–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
                    <div id="todayReportsList">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–æ–≤...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –û—Ç—á–µ—Ç—ã –≤–∫–ª–∞–¥–∫–∞ -->
            <div id="reportsContent" class="admin-tab-content" style="display: none;">
                <!-- –§–∏–ª—å—Ç—Ä—ã -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 16px; margin-bottom: 24px;">
                    <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–ü–µ—Ä–∏–æ–¥</label>
                            <select id="periodFilter" onchange="updateAdminPanel()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                                <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                                <option value="week">–≠—Ç–∞ –Ω–µ–¥–µ–ª—è</option>
                                <option value="month">–≠—Ç–æ—Ç –º–µ—Å—è—Ü</option>
                                <option value="custom">–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—ã</option>
                            </select>
                        </div>
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</label>
                            <select id="employeeFilter" onchange="updateAdminPanel()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                                <option value="all">–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="customDateRange" style="display: none; gap: 12px;">
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–°</label>
                            <input type="date" id="startDate" onchange="updateAdminPanel()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                        </div>
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–ü–æ</label>
                            <input type="date" id="endDate" onchange="updateAdminPanel()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                        </div>
                    </div>
                </div>
                
                <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="stats-grid" style="margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-icon">üìù</div>
                        <div class="stat-value" id="adminTotalReports">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –æ—Ç—á–µ—Ç–æ–≤</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-value" id="adminActiveEmployees">0</div>
                        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-value" id="adminCompletedTasks">0</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-value" id="adminTodayReports">0</div>
                        <div class="stat-label">–û—Ç—á–µ—Ç–æ–≤ —Å–µ–≥–æ–¥–Ω—è</div>
                    </div>
                </div>
                
                <!-- –°–ø–∏—Å–æ–∫ –æ—Ç—á–µ—Ç–æ–≤ -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px;">–û—Ç—á–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
                    <div id="adminReportsList">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–æ–≤...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –£—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –≤–∫–ª–∞–¥–∫–∞ -->
            <div id="attendanceContent" class="admin-tab-content" style="display: none;">
                <!-- –§–∏–ª—å—Ç—Ä—ã -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 16px; margin-bottom: 24px;">
                    <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–ü–µ—Ä–∏–æ–¥</label>
                            <select id="attendancePeriodFilter" onchange="updateAttendanceHistory()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                                <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                                <option value="week" selected>–≠—Ç–∞ –Ω–µ–¥–µ–ª—è</option>
                                <option value="month">–≠—Ç–æ—Ç –º–µ—Å—è—Ü</option>
                                <option value="custom">–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—ã</option>
                            </select>
                        </div>
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</label>
                            <select id="attendanceEmployeeFilter" onchange="updateAttendanceHistory()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                                <option value="all">–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="attendanceCustomDateRange" style="display: none; gap: 12px;">
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–°</label>
                            <input type="date" id="attendanceStartDate" onchange="updateAttendanceHistory()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                        </div>
                        <div style="flex: 1;">
                            <label style="font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 4px;">–ü–æ</label>
                            <input type="date" id="attendanceEndDate" onchange="updateAttendanceHistory()" style="width: 100%; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                        </div>
                    </div>
                </div>
                
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="stats-grid" style="margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-value" id="attendanceTotalDays">0</div>
                        <div class="stat-label">–†–∞–±–æ—á–∏—Ö –¥–Ω–µ–π</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚è∞</div>
                        <div class="stat-value" id="attendanceTotalHours">0</div>
                        <div class="stat-label">–ß–∞—Å–æ–≤ –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚ö†Ô∏è</div>
                        <div class="stat-value" id="attendanceLateCount">0</div>
                        <div class="stat-label">–û–ø–æ–∑–¥–∞–Ω–∏–π</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-value" id="attendanceAvgHours">0</div>
                        <div class="stat-label">–ß–∞—Å–æ–≤ –≤ –¥–µ–Ω—å</div>
                    </div>
                </div>
                
                <!-- –ò—Å—Ç–æ—Ä–∏—è —É—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ -->
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 18px;">–ò—Å—Ç–æ—Ä–∏—è —É—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏</h3>
                    <div id="attendanceHistoryList">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <div id="taskModal" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 2000;">
        <div style="background: var(--bg-card); border-radius: 20px; padding: 28px; width: 90%; max-width: 400px; max-height: 90vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2 style="margin: 0;">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h2>
                <button onclick="closeTaskModal()" style="background: none; border: none; color: var(--text-secondary); font-size: 24px; cursor: pointer;">‚úï</button>
            </div>
            
            <form id="taskForm" onsubmit="submitTask(event)">
                <div class="form-group">
                    <label>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</label>
                    <select id="taskEmployee" name="employee" required style="background: var(--bg-secondary);">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
                    <input type="text" name="title" required placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏">
                </div>
                
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                    <textarea name="description" rows="3" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                </div>
                
                <div class="form-group">
                    <label>–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                    <input type="date" id="taskDeadline" name="deadline" required>
                </div>
                
                <div class="form-group">
                    <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                    <select name="priority" style="background: var(--bg-secondary);">
                        <option value="–ù–∏–∑–∫–∏–π">üü¢ –ù–∏–∑–∫–∏–π</option>
                        <option value="–°—Ä–µ–¥–Ω–∏–π" selected>üü° –°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="–í—ã—Å–æ–∫–∏–π">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                    </select>
                </div>
                
                <button type="submit" class="submit-btn">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
            </form>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <div id="editTaskModal" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 2000;">
        <div style="background: var(--bg-card); border-radius: 20px; padding: 28px; width: 90%; max-width: 400px; max-height: 90vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2 style="margin: 0;">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É</h2>
                <button onclick="closeEditTaskModal()" style="background: none; border: none; color: var(--text-secondary); font-size: 24px; cursor: pointer;">‚úï</button>
            </div>
            
            <form id="editTaskForm" onsubmit="submitEditTask(event)">
                <input type="hidden" id="editTaskId" name="taskId">
                
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
                    <input type="text" id="editTaskTitle" name="title" required placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏">
                </div>
                
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="editTaskDescription" name="description" rows="3" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                </div>
                
                <div class="form-group">
                    <label>–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                    <input type="date" id="editTaskDeadline" name="deadline" required>
                </div>
                
                <div class="form-group">
                    <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                    <select id="editTaskPriority" name="priority" style="background: var(--bg-secondary);">
                        <option value="–ù–∏–∑–∫–∏–π">üü¢ –ù–∏–∑–∫–∏–π</option>
                        <option value="–°—Ä–µ–¥–Ω–∏–π">üü° –°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="–í—ã—Å–æ–∫–∏–π">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</label>
                    <select id="editTaskEmployee" name="employee" required style="background: var(--bg-secondary);">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</option>
                    </select>
                </div>
                
                <button type="submit" class="submit-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </form>
        </div>
    </div>
    
    <script src="app.js"></script>
    
    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Lucide –∏–∫–æ–Ω–æ–∫ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Lucide –∏–∫–æ–Ω–∫–∏
            lucide.createIcons();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
            updateDateTime();
            setInterval(updateDateTime, 1000);
        });
        
        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏
        function updateDateTime() {
            const now = new Date();
            const timeElement = document.getElementById('currentTime');
            const dateElement = document.getElementById('currentDate');
            
            if (timeElement) {
                timeElement.textContent = now.toLocaleTimeString('ru-RU', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
            
            if (dateElement) {
                dateElement.textContent = now.toLocaleDateString('ru-RU', {
                    weekday: 'long',
                    day: 'numeric',
                    month: 'long'
                });
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è FAB –º–µ–Ω—é
        function toggleFab() {
            const fabMain = document.getElementById('fabMain');
            const fabMenu = document.getElementById('fabMenu');
            
            if (fabMenu.classList.contains('active')) {
                fabMain.classList.remove('active');
                fabMenu.classList.remove('active');
            } else {
                fabMain.classList.add('active');
                fabMenu.classList.add('active');
            }
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ FAB –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        document.addEventListener('click', function(event) {
            const floatingActions = document.querySelector('.floating-actions');
            if (!floatingActions.contains(event.target)) {
                document.getElementById('fabMain').classList.remove('active');
                document.getElementById('fabMenu').classList.remove('active');
            }
        });
    </script>
</body>
</html>
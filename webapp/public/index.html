<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Парение</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <!-- Loading -->
    <div id="loading" class="loading-screen">
      <div class="loading-content">
        <div class="loading-icon">
          <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
            <circle cx="24" cy="24" r="20" stroke="url(#gradient)" stroke-width="4" stroke-linecap="round" stroke-dasharray="80 40">
              <animateTransform attributeName="transform" type="rotate" from="0 24 24" to="360 24 24" dur="1s" repeatCount="indefinite"/>
            </circle>
            <defs>
              <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#D4A574"/>
                <stop offset="100%" style="stop-color:#8B6914"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <p class="loading-text">Загрузка</p>
      </div>
    </div>

    <!-- Main Content -->
    <div id="main-content" class="hidden">
      <!-- Header -->
      <header class="header">
        <div class="header-info">
          <span class="header-greeting" id="greeting">Добрый день</span>
          <h1 class="header-name" id="user-name-header">Загрузка...</h1>
        </div>
        <div class="header-avatar" id="user-avatar">
          <span>И</span>
        </div>
      </header>

      <!-- Pages Container -->
      <main class="main-content">
        <!-- Today Page -->
        <div id="page-today" class="page active">
          <!-- Quick Stats -->
          <div class="stats-container">
            <div class="stat-card glass">
              <div class="stat-icon blue">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2"/><line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="stat-today">0</span>
                <span class="stat-label">Сегодня</span>
              </div>
            </div>
            <div class="stat-card glass">
              <div class="stat-icon orange">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="stat-new">0</span>
                <span class="stat-label">Новых</span>
              </div>
            </div>
            <div class="stat-card glass">
              <div class="stat-icon green">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="stat-confirmed">0</span>
                <span class="stat-label">Подтв.</span>
              </div>
            </div>
          </div>

          <!-- Section Header -->
          <div class="section-header">
            <h2 class="section-title">Записи на сегодня</h2>
            <span class="section-date" id="current-date"></span>
          </div>

          <!-- Bookings List -->
          <div id="today-list" class="bookings-list"></div>
        </div>

        <!-- Week Page -->
        <div id="page-week" class="page">
          <div class="section-header">
            <h2 class="section-title">Записи на неделю</h2>
          </div>
          <div id="week-list" class="bookings-list"></div>
        </div>

        <!-- All Bookings Page -->
        <div id="page-all" class="page">
          <div class="section-header">
            <h2 class="section-title">Все записи</h2>
            <select id="filter-status" class="filter-btn">
              <option value="">Все</option>
              <option value="new">Новые</option>
              <option value="confirmed">Подтв.</option>
              <option value="in_progress">В работе</option>
              <option value="completed">Завершено</option>
              <option value="cancelled">Отменено</option>
            </select>
          </div>
          <div id="all-list" class="bookings-list"></div>
        </div>

        <!-- Profile Page -->
        <div id="page-profile" class="page">
          <div class="profile-card glass">
            <div class="profile-avatar-large" id="profile-avatar">И</div>
            <h2 class="profile-name" id="profile-name">Загрузка...</h2>
            <span class="profile-role-badge" id="profile-role">-</span>
          </div>

          <div class="profile-stats-grid">
            <div class="profile-stat-card glass">
              <span class="profile-stat-value" id="profile-total">0</span>
              <span class="profile-stat-label">Всего записей</span>
            </div>
            <div class="profile-stat-card glass">
              <span class="profile-stat-value" id="profile-completed">0</span>
              <span class="profile-stat-label">Завершено</span>
            </div>
          </div>
        </div>
      </main>

      <!-- Floating Action Button -->
      <button id="fab-add" class="fab">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
      </button>

      <!-- Bottom Navigation -->
      <nav class="bottom-nav glass">
        <button class="nav-item active" data-page="today">
          <div class="nav-icon">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
              <line x1="9" y1="2" x2="9" y2="6"/>
              <line x1="15" y1="2" x2="15" y2="6"/>
            </svg>
          </div>
          <span>Сегодня</span>
        </button>
        <button class="nav-item" data-page="week">
          <div class="nav-icon">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
              <circle cx="8" cy="15" r="1" fill="currentColor"/>
              <circle cx="12" cy="15" r="1" fill="currentColor"/>
              <circle cx="16" cy="15" r="1" fill="currentColor"/>
            </svg>
          </div>
          <span>Неделя</span>
        </button>
        <button class="nav-item" data-page="all">
          <div class="nav-icon">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="8" y1="6" x2="21" y2="6"/>
              <line x1="8" y1="12" x2="21" y2="12"/>
              <line x1="8" y1="18" x2="21" y2="18"/>
              <circle cx="4" cy="6" r="1" fill="currentColor"/>
              <circle cx="4" cy="12" r="1" fill="currentColor"/>
              <circle cx="4" cy="18" r="1" fill="currentColor"/>
            </svg>
          </div>
          <span>Все</span>
        </button>
        <button class="nav-item" data-page="profile">
          <div class="nav-icon">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </div>
          <span>Профиль</span>
        </button>
      </nav>
    </div>

    <!-- Booking Modal -->
    <div id="booking-modal" class="modal hidden">
      <div class="modal-overlay"></div>
      <div class="modal-sheet">
        <div class="modal-handle"></div>
        <div class="modal-header">
          <h3 id="modal-title">Новая запись</h3>
          <button class="modal-close" onclick="closeModal()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
        <form id="booking-form" class="modal-form">
          <input type="hidden" id="booking-id">

          <div class="form-section">
            <label class="form-label">Дата и время</label>
            <div class="form-row">
              <input type="date" id="booking-date" required class="form-input">
              <input type="time" id="booking-time" required class="form-input">
            </div>
          </div>

          <div class="form-section">
            <label class="form-label">Клиент</label>
            <input type="text" id="client-name" required placeholder="Имя клиента" class="form-input">
            <input type="tel" id="client-phone" required placeholder="+7 999 123 45 67" class="form-input">
          </div>

          <div class="form-section">
            <label class="form-label">Детали</label>
            <div class="form-row">
              <select id="steam-type" class="form-input">
                <option value="">Тип парения</option>
                <option value="Классическое">Классическое</option>
                <option value="Веничное">Веничное</option>
                <option value="Ароматическое">Ароматическое</option>
                <option value="Контрастное">Контрастное</option>
                <option value="VIP">VIP</option>
              </select>
              <input type="number" id="duration" value="60" min="30" step="30" placeholder="Мин" class="form-input">
            </div>
            <div class="form-row">
              <input type="number" id="guests-count" value="1" min="1" max="10" placeholder="Гостей" class="form-input">
              <input type="number" id="price" placeholder="Цена ₽" step="100" class="form-input">
            </div>
            <input type="number" id="prepayment" value="0" step="100" placeholder="Предоплата ₽" class="form-input">
          </div>

          <div class="form-section">
            <label class="form-label">Комментарий</label>
            <textarea id="comment" rows="2" placeholder="Дополнительная информация..." class="form-input form-textarea"></textarea>
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="closeModal()">Отмена</button>
            <button type="submit" class="btn btn-primary">Сохранить</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Detail Modal -->
    <div id="detail-modal" class="modal hidden">
      <div class="modal-overlay"></div>
      <div class="modal-sheet">
        <div class="modal-handle"></div>
        <div class="modal-header">
          <h3>Детали записи</h3>
          <button class="modal-close" onclick="closeDetailModal()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
        <div id="detail-content" class="modal-body"></div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>

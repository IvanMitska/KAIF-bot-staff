<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>KAIF App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navigation">
        <button class="nav-btn active" onclick="showPage('home')">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </button>
        <button class="nav-btn" onclick="showPage('report')">
            <span class="nav-icon">üìù</span>
            <span class="nav-label">–û—Ç—á–µ—Ç—ã</span>
        </button>
        <button class="nav-btn" onclick="showPage('tasks')">
            <span class="nav-icon">‚úÖ</span>
            <span class="nav-label">–ó–∞–¥–∞—á–∏</span>
        </button>
        <button class="nav-btn" onclick="showPage('stats')">
            <span class="nav-icon">üìä</span>
            <span class="nav-label">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
        </button>
        <button class="nav-btn" onclick="showPage('profile')">
            <span class="nav-icon">üë§</span>
            <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </button>
    </nav>
    
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div id="home" class="page active">
            <div class="header">
                <h1>–ü—Ä–∏–≤–µ—Ç, <span id="userName">Ivan</span>! üëã</h1>
                <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ KAIF Staff</p>
            </div>
            
            <div class="action-cards">
                <div class="action-card" onclick="showPage('report')">
                    <div class="action-icon">üìù</div>
                    <div class="action-content">
                        <h3>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç</h3>
                        <p>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–∞–±–æ—Ç–µ</p>
                    </div>
                </div>
                
                <div class="action-card" onclick="showPage('tasks')">
                    <div class="action-icon">‚úÖ</div>
                    <div class="action-content">
                        <h3>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h3>
                        <p><span id="activeTasksCount">0</span> –∞–∫—Ç–∏–≤–Ω—ã—Ö</p>
                    </div>
                </div>
            </div>
            
            <div class="status-section">
                <h2 style="font-size: 18px; margin-bottom: 16px; color: var(--text-secondary);">–°—Ç–∞—Ç—É—Å –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h2>
                <div class="status-card">
                    <div id="reportStatusItem" class="status-item status-warning">
                        <span class="status-icon">‚ö†Ô∏è</span>
                        <span class="status-text">–û—Ç—á–µ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç—á–µ—Ç–æ–≤ -->
        <div id="report" class="page">
            <button class="back-btn" onclick="showPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header">
                <h1>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç</h1>
                <p id="reportDate">2 –∞–≤–≥—É—Å—Ç–∞ 2025</p>
            </div>
            
            <form id="reportForm">
                <div class="form-group">
                    <label>‚úçÔ∏è –ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏ —Å–µ–≥–æ–¥–Ω—è?</label>
                    <textarea name="whatDone" required placeholder="–û–ø–∏—à–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É..."></textarea>
                </div>
                
                <div class="form-group">
                    <label>‚ö†Ô∏è –ö–∞–∫–∏–µ –±—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã?</label>
                    <textarea name="problems" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ '–Ω–µ—Ç'..."></textarea>
                </div>
                
                <button type="submit" class="submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç</button>
            </form>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–¥–∞—á -->
        <div id="tasks" class="page">
            <button class="back-btn" onclick="showPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header" style="position: relative;">
                <h1>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h1>
                <button id="createTaskBtn" onclick="showCreateTaskModal()" style="display: none; position: absolute; top: 50%; right: 0; transform: translateY(-50%); background: var(--gradient-primary); border: none; color: white; padding: 10px 20px; border-radius: 20px; font-size: 14px; font-weight: 600; cursor: pointer; align-items: center; gap: 8px;">
                    <span>‚ûï –°–æ–∑–¥–∞—Ç—å</span>
                </button>
            </div>
            
            <div class="task-filters">
                <button class="filter-btn active" onclick="filterTasks('all')">
                    –í—Å–µ <span class="count">0</span>
                </button>
                <button class="filter-btn" onclick="filterTasks('new')">
                    üî¥ –ù–æ–≤—ã–µ <span class="count">0</span>
                </button>
                <button class="filter-btn" onclick="filterTasks('in-progress')">
                    üü° –í —Ä–∞–±–æ—Ç–µ <span class="count">0</span>
                </button>
                <button class="filter-btn" onclick="filterTasks('completed')">
                    üü¢ –í—ã–ø–æ–ª–Ω–µ–Ω—ã <span class="count">0</span>
                </button>
            </div>
            
            <div id="tasksList">
                <div class="loading">
                    <div class="spinner"></div>
                    <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á...</p>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <div id="stats" class="page">
            <button class="back-btn" onclick="showPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header">
                <h1>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìÖ</div>
                    <div class="stat-value" id="totalReports">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –æ—Ç—á–µ—Ç–æ–≤</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-value" id="completedTasks">0</div>
                    <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">üî•</div>
                    <div class="stat-value" id="currentStreak">0</div>
                    <div class="stat-label">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-value" id="completionRate">0%</div>
                    <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="profile" class="page">
            <button class="back-btn" onclick="showPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header">
                <h1>–ü—Ä–æ—Ñ–∏–ª—å</h1>
            </div>
            
            <div class="profile-content">
                <div class="action-card">
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 64px; margin-bottom: 16px;">üë§</div>
                        <h2 id="profileName" style="margin-bottom: 8px;">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                        <p id="profilePosition" style="color: var(--text-secondary); margin-bottom: 16px;">...</p>
                        <p style="color: var(--text-muted); font-size: 14px;">ID: <span id="profileId">...</span></p>
                    </div>
                </div>
                
                <div style="margin-top: 24px;">
                    <div class="action-card" onclick="showHelp()">
                        <div class="action-icon">‚ùì</div>
                        <div class="action-content">
                            <h3>–ü–æ–º–æ—â—å</h3>
                            <p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞</p>
                        </div>
                    </div>
                    
                    <div id="managerSection" style="display: none;">
                        <div class="action-card" onclick="showEmployees()">
                            <div class="action-icon">üë•</div>
                            <div class="action-content">
                                <h3>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h3>
                                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤) -->
        <div id="employees" class="page">
            <button class="back-btn" onclick="showPage('profile')">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="header">
                <h1>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h1>
                <p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</p>
            </div>
            
            <div id="employeesList">
                <div class="loading">
                    <div class="spinner"></div>
                    <p style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <div id="taskModal" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 2000;">
        <div style="background: var(--bg-card); border-radius: 20px; padding: 28px; width: 90%; max-width: 400px; max-height: 90vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2 style="margin: 0;">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h2>
                <button onclick="closeTaskModal()" style="background: none; border: none; color: var(--text-secondary); font-size: 24px; cursor: pointer;">‚úï</button>
            </div>
            
            <form id="taskForm" onsubmit="submitTask(event)">
                <div class="form-group">
                    <label>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</label>
                    <select id="taskEmployee" name="employee" required style="background: var(--bg-secondary);">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
                    <input type="text" name="title" required placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏">
                </div>
                
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                    <textarea name="description" rows="3" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                </div>
                
                <div class="form-group">
                    <label>–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                    <input type="date" id="taskDeadline" name="deadline" required>
                </div>
                
                <div class="form-group">
                    <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                    <select name="priority" style="background: var(--bg-secondary);">
                        <option value="low">üü¢ –ù–∏–∑–∫–∏–π</option>
                        <option value="medium" selected>üü° –°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="high">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                    </select>
                </div>
                
                <button type="submit" class="submit-btn">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
            </form>
        </div>
    </div>
    
    <script src="app.js"></script>
</body>
</html>
# Подробная инструкция по настройке базы данных Tasks

## Шаг 1: Создание всех необходимых полей

Нажмите на "+" справа от "Name" чтобы добавить новые поля. Создайте следующие поля с ТОЧНЫМИ названиями:

### 1. **ID** (уже есть как Name - переименуйте)
- Кликните на "Name" → "Edit property" 
- Измените название на "ID"
- Тип: Title (оставить как есть)

### 2. **Название**
- Нажмите "+" → выберите "Text"
- Назовите поле "Название"

### 3. **Описание**
- Нажмите "+" → выберите "Text"
- Назовите поле "Описание"

### 4. **Исполнитель**
- Нажмите "+" → выберите "Text"
- Назовите поле "Исполнитель"

### 5. **Исполнитель ID**
- Нажмите "+" → выберите "Number"
- Назовите поле "Исполнитель ID"

### 6. **Постановщик**
- Нажмите "+" → выберите "Text"
- Назовите поле "Постановщик"

### 7. **Постановщик ID**
- Нажмите "+" → выберите "Number"
- Назовите поле "Постановщик ID"

### 8. **Статус**
- Нажмите "+" → выберите "Select"
- Назовите поле "Статус"
- Добавьте опции (ТОЧНО как написано):
  - Новая (можно выбрать красный цвет)
  - В работе (можно выбрать желтый цвет)
  - Выполнена (можно выбрать зеленый цвет)

### 9. **Приоритет**
- Нажмите "+" → выберите "Select"
- Назовите поле "Приоритет"
- Добавьте опции (ТОЧНО как написано):
  - low (зеленый цвет)
  - medium (желтый цвет)
  - high (красный цвет)

### 10. **Дата создания**
- Нажмите "+" → выберите "Date"
- Назовите поле "Дата создания"

### 11. **Срок выполнения**
- Нажмите "+" → выберите "Date"
- Назовите поле "Срок выполнения"

### 12. **Дата выполнения**
- Нажмите "+" → выберите "Date"
- Назовите поле "Дата выполнения"

### 13. **Комментарий исполнителя**
- Нажмите "+" → выберите "Text"
- Назовите поле "Комментарий исполнителя"

## Шаг 2: Добавление интеграции

1. Нажмите кнопку "Share" в правом верхнем углу
2. В поле ввода начните вводить "Report KAIF"
3. Когда появится интеграция с иконкой робота, выберите её
4. Нажмите "Invite"
5. Убедитесь, что у интеграции есть "Full access"

## Шаг 3: Получение ID базы данных

1. Посмотрите на URL страницы в браузере
2. Он выглядит примерно так:
   ```
   https://www.notion.so/mitska91/Tasks-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX?v=YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY
   ```
3. Скопируйте часть `XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX` (32 символа между "Tasks-" и "?v=")
4. Это и есть ID вашей базы данных

## Шаг 4: Обновление Railway

1. Откройте https://railway.app/
2. Войдите в ваш проект
3. Перейдите в раздел "Variables"
4. Найдите переменную `NOTION_DATABASE_TASKS_ID`
5. Нажмите на неё и вставьте скопированный ID
6. Нажмите "Save" или галочку для сохранения

## Шаг 5: Перезапуск деплоя

1. В Railway перейдите в раздел "Deployments"
2. Нажмите на три точки у последнего деплоя
3. Выберите "Redeploy" или "Restart"
4. Дождитесь завершения (обычно 1-2 минуты)

## Шаг 6: Проверка

1. Откройте Web App бота
2. Перейдите в раздел "Задачи"
3. Если вы менеджер (Иван или Борис), должна появиться кнопка "Создать"
4. Попробуйте создать тестовую задачу

## Возможные проблемы:

- **Ошибка 500**: Проверьте, что все поля названы ТОЧНО как в инструкции (регистр важен!)
- **Не видно задач**: Убедитесь, что интеграция добавлена с Full access
- **Кнопка "Создать" не появляется**: Она видна только менеджерам (ID: 1734337242 или 385436658)

## Важно:
- Названия полей должны быть ТОЧНО как указано (включая пробелы и регистр)
- Тип каждого поля должен соответствовать указанному
- Интеграция должна иметь Full access